{
  "hash": "e3dc6f512fce1fc3f339623cc35d8b94",
  "result": {
    "markdown": "---\ntitle: \"tidyverse principleë¡œ ì‹œê³„ì—´ ìë£Œ ë¶„ì„í•˜ê¸°\"\ndescription: |\n  tidyverts ecosystem ì†Œê°œ\ndate: 2022-03-11\ndraft: FALSE\npreview: preview.jpg\ncitation:\n  url: https://taemobang.com/posts/2022-03-11-do-time-series-analysis-with-tidyverse-principle/\ncategories: [Time Series, R]\nbibliography: references.bib\n---\n\n\n\n\n[![Photo by AgÃª Barros on Unsplash](preview.jpg){width=\"800\"}](https://unsplash.com/photos/rBPOfVqROzY?utm_source=unsplash&utm_medium=referral&utm_content=creditShareLink)\n\n<aside>ë³¸ ê¸€ì€ [@tidyvert]ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</aside>\n\ntidyverts ecosystemì€ ì‹œê³„ì—´ ìë£Œì— ê´€í•œ ë¶„ì„ì„ tidyverse principleë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œë” í•´ì£¼ëŠ” íŒ¨í‚¤ì§€ ë¬¶ìŒì…ë‹ˆë‹¤. ì „ì²˜ë¦¬, ì‹œê°í™”ë¶€í„° ëª¨ë¸ë§, ì˜ˆì¸¡ê¹Œì§€ ëª¨ë“  ê³¼ì •ì„ \"tidy\" frameworkë¡œ ì§„í–‰í•˜ê²Œ í•´ì£¼ì£ . tidyverse pricipleì´ ë°ì´í„° ì „ì²˜ë¦¬ì— ìˆì–´ì„œ ì–¼ë§ˆë‚˜ ë§ì€ ì—…ë¬´ ìƒì‚°ì„±ì„ ê°€ì ¸ë‹¤ ì£¼ëŠ”ì§€ ìš°ë¦¬ëŠ” ì´ë¯¸ ì•Œê³ ìˆìŠµë‹ˆë‹¤. ì‹œê³„ì—´ ìë£Œë¥¼ ìì£¼ ë‹¤ë£¨ëŠ” ì‚¬ëŒì´ë¼ë©´ ê¼­ ë°°ì›Œë‘˜ ë§Œí•œ íŒ¨í‚¤ì§€ì£ .ğŸ˜„ tidyverts ecosystemì„ ì´ë£¨ëŠ” ëŒ€ë¶€ë¶„ì˜ íŒ¨í‚¤ì§€ë“¤ì€ `{fpp3}`ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `{tsibbletalk}`ì€ `{shiny}`ì™€ í•¨ê»˜ ë™ì‘í•˜ëŠ” ë°˜ì‘í˜• ê·¸ë˜í”½ì„ ì œê³µí•˜ëŠ” íŒ¨í‚¤ì§€ë¡œ ë³¸ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ìƒëµí•˜ê² ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(fpp3)\nlibrary(fable.prophet)\nlibrary(nycflights13) # for nycflights13 data\nlibrary(purrr) # for map()\nggplot2::theme_set(theme_minimal())\nloaded_package <- c(\"fpp3\", \"fable.prophet\", \"nycflights13\", \"purrr\")\n.version <- map(loaded_package, packageVersion)\nnames(.version) <- loaded_package\n.version\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n$fpp3\n[1] '0.4.0'\n\n$fable.prophet\n[1] '0.1.0'\n\n$nycflights13\n[1] '1.0.2'\n\n$purrr\n[1] '0.3.4'\n```\n:::\n:::\n\n\nìœ„ íŒ¨í‚¤ì§€ë“¤ì´ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šì€ ë¶„ë“¤ì€ íŠœí† ë¦¬ì–¼ì˜ ë³¸ê²©ì ì¸ ì‹œì‘ì „ì—, `install.packages(\"íŒ¨í‚¤ì§€ëª…\")`ì„ í†µí•´ ì„¤ì¹˜í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ê°œë°œ ë²„ì „ì„ ì„¤ì¹˜í•˜ê³  ì‹¶ìœ¼ì‹  ë¶„ì´ ìˆë‹¤ë©´ ë‹¤ìŒì˜ ì½”ë“œë¥¼ ì´ìš©í•˜ì„¸ìš”:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages(\"remotes\")\nremotes::install_github(\"tidyverts/tsibble\")\n```\n:::\n\n\n## **1 tsibble**\n\n### 1.1 Get Started\n\n`{tsibble}`ì€ ì¼ë°˜ì ì¸ ì‹œê³„ì—´ ìë£Œë¥¼ `tibble` í˜•íƒœë¡œ í‘œí˜„í•  ìˆ˜ ìˆê²Œí•´ì¤ë‹ˆë‹¤. ìš°ë¦¬ëŠ” `tsibble()`ì„ í†µí•´ [tidyí•œ ìë£Œ](https://tidyr.tidyverse.org/articles/tidy-data.html)ì— ëŒ€í•´ ìˆ˜í–‰í•´ì™”ë˜ {tidyverse}ë¥¼ ì´ìš©í•œ wranglingì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, tidyverse ecosystemì´ tibble ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë“¯ì´, tidyverts ecosytemì€ tsibble ê°ì²´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤. tsibble ê°ì²´ê°€ ê°–ëŠ” ê¸°ë³¸ì ì¸ ì›ì¹™ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n-   `index`: ê³¼ê±°ë¶€í„° í˜„ì¬ê¹Œì§€ ìˆœì„œí™”ëœ ìë£Œê°’ì˜ ê´€ì¸¡ ì‹œê°„\n-   `key`: ì‹œê°„ì— ë”°ë¥¸ ê´€ì¸¡ ë‹¨ìœ„ë¥¼ ì •ì˜í•˜ëŠ” ë³€ìˆ˜ì˜ ì§‘í•©\n-   ê° ê´€ì¸¡ì¹˜ëŠ” `index`ì™€ `key`ë¥¼ í†µí•´ ìœ ì¼í•˜ê²Œ(uniquely) ì‹ë³„ë˜ì–´ì•¼ë§Œ í•¨\n-   ê° ê´€ì¸¡ì¹˜ëŠ” ë“±ê°„ê²©ìœ¼ë¡œ ê´€ì¸¡ëœ ìë£Œì—¬ì•¼ë§Œ í•¨\n\nì¦‰, í‹°ë¸”(ë°ì´í„°í”„ë ˆì„)ì„ `tsibble`ë¡œ ë³€í™˜í•˜ê¸°(coerce) ìœ„í•´ì„œëŠ” `key`ì™€ `index`ë¥¼ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì€ `{nycflights13}` íŒ¨í‚¤ì§€ì˜ `weather` ìë£Œë¥¼ ì´ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_simple <- nycflights13::weather %>% \n    select(origin, time_hour, temp, humid, precip)\nweather_simple\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"origin\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"time_hour\"],\"name\":[2],\"type\":[\"dttm\"],\"align\":[\"right\"]},{\"label\":[\"temp\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"humid\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"precip\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"EWR\",\"2\":\"2013-01-01 01:00:00\",\"3\":\"39.02\",\"4\":\"59.37\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 02:00:00\",\"3\":\"39.02\",\"4\":\"61.63\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 03:00:00\",\"3\":\"39.02\",\"4\":\"64.43\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 04:00:00\",\"3\":\"39.92\",\"4\":\"62.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 05:00:00\",\"3\":\"39.02\",\"4\":\"64.43\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 06:00:00\",\"3\":\"37.94\",\"4\":\"67.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 07:00:00\",\"3\":\"39.02\",\"4\":\"64.43\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 08:00:00\",\"3\":\"39.92\",\"4\":\"62.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 09:00:00\",\"3\":\"39.92\",\"4\":\"62.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 10:00:00\",\"3\":\"41.00\",\"4\":\"59.65\",\"5\":\"0\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n`origin`ì„ `key`ë¡œ `index`ë¥¼ `time_hour`ë¡œ í•´ì£¼ë©´ ë  ê²ƒ ê°™ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_tsbl <- as_tsibble(weather_simple, key = origin, index = time_hour)\nweather_tsbl\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"origin\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"time_hour\"],\"name\":[2],\"type\":[\"dttm\"],\"align\":[\"right\"]},{\"label\":[\"temp\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"humid\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"precip\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"EWR\",\"2\":\"2013-01-01 01:00:00\",\"3\":\"39.02\",\"4\":\"59.37\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 02:00:00\",\"3\":\"39.02\",\"4\":\"61.63\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 03:00:00\",\"3\":\"39.02\",\"4\":\"64.43\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 04:00:00\",\"3\":\"39.92\",\"4\":\"62.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 05:00:00\",\"3\":\"39.02\",\"4\":\"64.43\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 06:00:00\",\"3\":\"37.94\",\"4\":\"67.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 07:00:00\",\"3\":\"39.02\",\"4\":\"64.43\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 08:00:00\",\"3\":\"39.92\",\"4\":\"62.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 09:00:00\",\"3\":\"39.92\",\"4\":\"62.21\",\"5\":\"0\"},{\"1\":\"EWR\",\"2\":\"2013-01-01 10:00:00\",\"3\":\"41.00\",\"4\":\"59.65\",\"5\":\"0\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nì—¬ê¸°ì„œëŠ” ìë£Œ ìì²´ê°€ ì¶œë°œì§€(`origin`) ë³„ë¡œ ê¸°ë¡ëœ ë‹¤ì¤‘(multiple) ì‹œê³„ì—´ì— í•´ë‹¹í•˜ë¯€ë¡œ, `key`ë¥¼ `origin`ìœ¼ë¡œ ì¡ì•„ì¤¬ì§€ë§Œ, ë§Œì•½ ìë£Œê°€ ë‹¨ì¼(univariate) ì‹œê³„ì—´ì— í•´ë‹¹í•œë‹¤ë©´ í•´ë‹¹ keyëŠ” ì„¤ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´ ë©ë‹ˆë‹¤(see `package?tsibble` and `vignette(\"intro-tsibble\")` for details). ê·¸ë¦¬ê³ , ì‚¬ì‹¤ `tsibble()`ì€ irregular time intervalì„ ê°–ëŠ” ìë£Œì— ëŒ€í•´ì„œë„ ì ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. as_tsibbleì€ `regular = TRUE` ì˜µì…˜ì´ defaultë¡œ ì„¤ì •ë˜ëŠ”ë°, ì´ë¥¼ `FALSE`ë¡œ ë°”ê¿”ì£¼ë©´ ë˜ë©°, ì´ëŸ¬í•œ irregular time intervalì„ ê°–ëŠ” tsibble ê°ì²´ì˜ ê²½ìš°ëŠ” `[!]` í‘œì‹œë¥¼ í†µí•´ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnycflights13::flights %>%\n    mutate(\n      sched_dep_datetime = make_datetime(year, month, day, hour, minute, \n                                         tz = \"America/New_York\")) %>%\n    as_tsibble(\n        key = c(carrier, flight), \n        index = sched_dep_datetime, \n        regular = FALSE\n        )\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"month\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"day\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"dep_time\"],\"name\":[4],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"sched_dep_time\"],\"name\":[5],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"dep_delay\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"arr_time\"],\"name\":[7],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"sched_arr_time\"],\"name\":[8],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"arr_delay\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"carrier\"],\"name\":[10],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"flight\"],\"name\":[11],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"tailnum\"],\"name\":[12],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"origin\"],\"name\":[13],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"dest\"],\"name\":[14],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"air_time\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"distance\"],\"name\":[16],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"hour\"],\"name\":[17],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"minute\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"time_hour\"],\"name\":[19],\"type\":[\"dttm\"],\"align\":[\"right\"]},{\"label\":[\"sched_dep_datetime\"],\"name\":[20],\"type\":[\"dttm\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2013\",\"2\":\"11\",\"3\":\"3\",\"4\":\"1531\",\"5\":\"1540\",\"6\":\"-9\",\"7\":\"1653\",\"8\":\"1725\",\"9\":\"-32\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N600LR\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"113\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-03 15:00:00\",\"20\":\"2013-11-03 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"4\",\"4\":\"1539\",\"5\":\"1540\",\"6\":\"-1\",\"7\":\"1712\",\"8\":\"1725\",\"9\":\"-13\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N903XJ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"117\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-04 15:00:00\",\"20\":\"2013-11-04 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"5\",\"4\":\"1548\",\"5\":\"1540\",\"6\":\"8\",\"7\":\"1708\",\"8\":\"1725\",\"9\":\"-17\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N602LR\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"120\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-05 15:00:00\",\"20\":\"2013-11-05 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"6\",\"4\":\"1535\",\"5\":\"1540\",\"6\":\"-5\",\"7\":\"1657\",\"8\":\"1725\",\"9\":\"-28\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N928XJ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"118\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-06 15:00:00\",\"20\":\"2013-11-06 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"7\",\"4\":\"1549\",\"5\":\"1540\",\"6\":\"9\",\"7\":\"1733\",\"8\":\"1725\",\"9\":\"8\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N914XJ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"131\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-07 15:00:00\",\"20\":\"2013-11-07 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"8\",\"4\":\"1539\",\"5\":\"1540\",\"6\":\"-1\",\"7\":\"1706\",\"8\":\"1725\",\"9\":\"-19\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N905XJ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"114\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-08 15:00:00\",\"20\":\"2013-11-08 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"9\",\"4\":\"1535\",\"5\":\"1540\",\"6\":\"-5\",\"7\":\"1714\",\"8\":\"1723\",\"9\":\"-9\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N929XJ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"121\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-09 15:00:00\",\"20\":\"2013-11-09 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"10\",\"4\":\"1538\",\"5\":\"1540\",\"6\":\"-2\",\"7\":\"1718\",\"8\":\"1725\",\"9\":\"-7\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N279PQ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"115\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-10 15:00:00\",\"20\":\"2013-11-10 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"11\",\"4\":\"1527\",\"5\":\"1540\",\"6\":\"-13\",\"7\":\"1710\",\"8\":\"1725\",\"9\":\"-15\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N908XJ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"119\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-11 15:00:00\",\"20\":\"2013-11-11 15:40:00\"},{\"1\":\"2013\",\"2\":\"11\",\"3\":\"12\",\"4\":\"1535\",\"5\":\"1540\",\"6\":\"-5\",\"7\":\"1709\",\"8\":\"1725\",\"9\":\"-16\",\"10\":\"9E\",\"11\":\"2900\",\"12\":\"N927XJ\",\"13\":\"JFK\",\"14\":\"BNA\",\"15\":\"118\",\"16\":\"765\",\"17\":\"15\",\"18\":\"40\",\"19\":\"2013-11-12 15:00:00\",\"20\":\"2013-11-12 15:40:00\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n### 1.2 Turn impicit missing values into explicit missing values\n\nê°„í˜¹ ì‹œê³„ì—´ ìë£Œì—ëŠ” ì•”ë¬µì  ê²°ì¸¡ì¹˜(implicit missing values)ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì•”ë¬µì  ê²°ì¸¡ì¹˜ê°€ ì¡´ì¬í•˜ëŠ” ì‹œê³„ì—´ ìë£Œê°€ ì¼ì •í•œ ì‹œê°„ ê°„ê²©ìœ¼ë¡œ ìˆ˜ì§‘ë˜ì—ˆì„ ê²½ìš°, ìš°ë¦¬ëŠ” `fill_gaps()`ë¥¼ ì´ìš©í•´ ì•”ë¬µì  ê²°ì¸¡ì„ ëª…ì‹œì ìœ¼ë¡œ(explicit) ë°”ê¿€ ìˆ˜ ìˆì–´ìš”. 4ë…„ê°„ ìˆ˜ì§‘ëœ ì—°ë„ë³„ í‚¤ìœ„, ì²´ë¦¬ì˜ ìˆ˜í™•ëŸ‰(ë‹¨ìœ„: kg)ì— ê´€í•œ ìë£Œë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì„œ `fill_gaps()`ì˜ ì“°ì„ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤. ë³¸ ìë£Œì—ëŠ” ì•”ë¬µì  ê²°ì¸¡ì´ ì¡´ì¬í•©ë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharvest <- tsibble(\n    year = c(2010, 2011, 2013, 2011, 2012, 2014),\n    fruit = rep(c(\"kiwi\", \"cherry\"), each = 3),\n    kilo = sample(1:10, size = 6),\n    key = fruit, index = year\n)\nharvest\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nì•”ë¬µì  ê²°ì¸¡ì´ë€, ì˜ˆë¥¼ ë“¤ì–´ ìœ„ ìë£Œì²˜ëŸ¼ ì²´ë¦¬ ìƒì‚°ëŸ‰ì´ 2010ë…„ì—ëŠ” ê¸°ë¡ë˜ì§€ ì•Šì•˜ìŒì—ë„ ë¶ˆêµ¬í•˜ê³  í–‰ì´ ìƒëµë˜ì–´ìˆëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. `NA`ë¡œ ëª…ì‹œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì†ì‰½ê²Œ ê°€ëŠ¥í•©ë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfill_gaps(harvest, .full = TRUE)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2010\",\"2\":\"cherry\",\"3\":\"NA\"},{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"NA\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"NA\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"},{\"1\":\"2014\",\"2\":\"kiwi\",\"3\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në‹¤ìŒì˜ ê°ê° ì‹œì‘ì , ëì ì— ëŒ€í•´ì„œë§Œ ê²°ì¸¡ì¹˜ë¥¼ ëª…ì‹œí•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# at the same starting point across units\nfill_gaps(harvest, .full = start())\n# at the same end point across units\nfill_gaps(harvest, .full = end())\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2010\",\"2\":\"cherry\",\"3\":\"NA\"},{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"NA\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"NA\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"NA\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"NA\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"},{\"1\":\"2014\",\"2\":\"kiwi\",\"3\":\"NA\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n`.full = FALSE`ë¥¼ ì„¤ì •í•  ê²½ìš°(`fill_gaps()`ì˜ default ì˜µì…˜ì— í•´ë‹¹), ê° key ë‚´ì˜ periodì—ì„œ ë°œìƒí•œ ê²°ì¸¡ì— ëŒ€í•´ì„œë§Œ ëª…ì‹œê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfill_gaps(harvest, .full = FALSE)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"NA\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"NA\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\níŠ¹ì •ê°’ìœ¼ë¡œì˜ ëª…ì‹œë„ ì†ì‰½ê²Œ ìˆ˜í–‰ì´ ê°€ëŠ¥í•´ìš”.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharvest %>% \n    fill_gaps(kilo = 0L)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"0\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"0\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në³€ìˆ˜ì— ëŒ€í•´ í•¨ìˆ˜ë¥¼ ì ìš©í•˜ì—¬ ëª…ì‹œë„ ê°€ëŠ¥í•©ë‹ˆë‹¤. `sum()`ì„ ì´ìš©í•˜ì—¬ í•©ìœ¼ë¡œ ëª…ì‹œí•´ë³´ì•˜ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharvest %>%\n    fill_gaps(kilo = sum(kilo))\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"38\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"38\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n`key`ì— ëŒ€í•´ `group_by`ë¥¼ í†µí•´ ê° ê·¸ë£¹ì— ëŒ€í•´ í•¨ìˆ˜ë¥¼ ì ìš©í•  ìˆ˜ë„ ìˆì£ . ì´ë²ˆì—ëŠ” `median()`ì„ í†µí•´ ì¤‘ìœ„ìˆ˜ë¡œ ëª…ì‹œí•´ë³´ì•˜ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharvest %>%\n    group_by_key() %>%\n    fill_gaps(kilo = median(kilo))\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"8\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nì› ìë£Œ ìì²´ì— `NA`ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°, ì ìš©í•˜ê³ ì í•˜ëŠ” í•¨ìˆ˜ì— `na.rm = TRUE`ì„ ì„¤ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharvest[2, 3] <- NA\nharvest %>%\n    group_by_key() %>%\n    fill_gaps(kilo = median(kilo, na.rm = TRUE))\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"1.0\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"NA\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"5.5\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"10.0\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"9.0\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"8.0\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"8.0\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"3.0\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në§ˆì§€ë§‰ìœ¼ë¡œ, `fill_gaps()`ì•„ `tidyr::fill()`ì„ í•¨ê»˜ ì´ìš©í•˜ë©´ ì•”ë¬µì  ê²°ì¸¡ì¹˜ë¥¼ ì´ì „ ì‹œì ì˜ ê²°ì¸¡ì¹˜ë¡œ ëŒ€ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharvest <- tsibble(\n    year = c(2010, 2011, 2013, 2011, 2012, 2014),\n    fruit = rep(c(\"kiwi\", \"cherry\"), each = 3),\n    kilo = sample(1:10, size = 6),\n    key = fruit, index = year\n)\nharvest %>%\n    group_by_key() %>%\n    fill_gaps() %>%\n    tidyr::fill(kilo, .direction = \"down\")\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"9\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"1\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"6\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"6\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"5\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në°˜ëŒ€ë¡œ, í•œ ì‹œì  ë¯¸ë˜ì˜ ê°’ìœ¼ë¡œ ëŒ€ì¹˜ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nharvest %>%\n    group_by_key() %>%\n    fill_gaps() %>%\n    tidyr::fill(kilo, .direction = \"up\")\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"year\"],\"name\":[1],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"fruit\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"kilo\"],\"name\":[3],\"type\":[\"int\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"2011\",\"2\":\"cherry\",\"3\":\"8\"},{\"1\":\"2012\",\"2\":\"cherry\",\"3\":\"7\"},{\"1\":\"2013\",\"2\":\"cherry\",\"3\":\"9\"},{\"1\":\"2014\",\"2\":\"cherry\",\"3\":\"9\"},{\"1\":\"2010\",\"2\":\"kiwi\",\"3\":\"1\"},{\"1\":\"2011\",\"2\":\"kiwi\",\"3\":\"6\"},{\"1\":\"2012\",\"2\":\"kiwi\",\"3\":\"5\"},{\"1\":\"2013\",\"2\":\"kiwi\",\"3\":\"5\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n### 1.3 Aggregate over calendar periods {#anchor2}\n\n`index_by()`ì™€ `summarise()`ë¥¼ ì´ìš©í•˜ë©´ ê´€ì‹¬ìˆëŠ” ë³€ìˆ˜ì— ëŒ€í•´ íŠ¹ì • ì‹œê°„ ì£¼ê¸°(e.g. monthly)ì— ëŒ€í•´ í•¨ìˆ˜(e.g. í•©ê³„: `sum()`, í‰ê· : `mean()`)ë¥¼ ì ìš©í•  ìˆ˜ ìˆì–´ìš”. `index_by`ëŠ” `as.Date()`, `tsibble::yearweek()`, `tsibble::yearmonth()`, `tsibble::yearquarter()`, ë¿ë§Œ ì•„ë‹ˆë¼ {lubridate} ê³„ì—´ì˜ í•¨ìˆ˜ì™€ í•¨ê»˜ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `weather` ìë£Œì˜ ì›”ë³„ í‰ê·  ê¸°ì˜¨, ì´ ê°•ìˆ˜ëŸ‰ì€ ë‹¤ìŒê³¼ ê°™ì´ `yearmonth()`ì— `index` ë³€ìˆ˜ë¥¼ `.`ìœ¼ë¡œ ë‚˜íƒ€ë‚´ì–´ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nweather_tsbl %>% \n    group_by_key() %>% \n    index_by(year_month = ~yearmonth(.)) %>%\n    summarise(\n        avg_temp = mean(temp, na.rm = TRUE),\n        total_precip = sum(precip, na.rm = TRUE)\n    )\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"origin\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"year_month\"],\"name\":[2],\"type\":[\"mth\"],\"align\":[\"right\"]},{\"label\":[\"avg_temp\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"total_precip\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"EWR\",\"2\":\"2013 Jan\",\"3\":\"35.56216\",\"4\":\"3.53\"},{\"1\":\"EWR\",\"2\":\"2013 Feb\",\"3\":\"34.26332\",\"4\":\"3.83\"},{\"1\":\"EWR\",\"2\":\"2013 Mar\",\"3\":\"40.11865\",\"4\":\"3.00\"},{\"1\":\"EWR\",\"2\":\"2013 Apr\",\"3\":\"52.97750\",\"4\":\"1.47\"},{\"1\":\"EWR\",\"2\":\"2013 May\",\"3\":\"63.32024\",\"4\":\"5.44\"},{\"1\":\"EWR\",\"2\":\"2013 Jun\",\"3\":\"73.26725\",\"4\":\"8.73\"},{\"1\":\"EWR\",\"2\":\"2013 Jul\",\"3\":\"80.70300\",\"4\":\"3.74\"},{\"1\":\"EWR\",\"2\":\"2013 Aug\",\"3\":\"74.53748\",\"4\":\"4.57\"},{\"1\":\"EWR\",\"2\":\"2013 Sep\",\"3\":\"67.30478\",\"4\":\"1.54\"},{\"1\":\"EWR\",\"2\":\"2013 Oct\",\"3\":\"59.77821\",\"4\":\"0.50\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n`index_by()`+`summarise()`ëŠ” irregular time intervalì„ ê°–ëŠ” tsibbleì— ëŒ€í•´ì„œë„ ìˆ˜í–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n<!-- <a href='https://tsibbledata.tidyverts.org/'><img src='logo_tsibbledata.png' align=\"right\" height=\"138.5\" /></a> -->\n\n## 2 tsibbledata\n\n{tsibbledata}ëŠ” tsibble í˜•íƒœì˜ ë‹¤ì–‘í•œ ì˜ˆì œ ìë£Œë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤. ì–´ë–¤ íŒ¨í‚¤ì§€ì— ëŒ€í•œ íŠœí† ë¦¬ì–¼ì„ ì§„í–‰í•  ë•Œ, ì ì ˆí•œ ìë£Œë“¤ì´ í•„ìš”ë¡œ ë˜ëŠ”ë°, ì´ë ‡ê²Œ ì˜ˆì œ ìë£Œë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì œê³µí•´ì¤€ë‹¤ëŠ” ì ì—ì„œ R ìœ ì €ë“¤ì— ëŒ€í•œ ë°°ë ¤ê°€ ë‹´ê²¨ìˆë‹¤ëŠ” ìƒê°ì´ ë“œë„¤ìš”. ì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒì˜ `olympic_running`ì€ 4ë…„ ì£¼ê¸°ë¡œ ìˆ˜ì§‘ëœ ì˜¬ë¦¼í”½ ë‹¬ë¦¬ê¸° ì¢…ëª©ì˜ ì„±ë³„ ìµœê³ ê¸°ë¡ì— ê´€í•œ ìë£Œì…ë‹ˆë‹¤(see `?olympic_running` for details).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nolympic_running\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Year\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Length\"],\"name\":[2],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"Sex\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Time\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1896\",\"2\":\"100\",\"3\":\"men\",\"4\":\"12.0\"},{\"1\":\"1900\",\"2\":\"100\",\"3\":\"men\",\"4\":\"11.0\"},{\"1\":\"1904\",\"2\":\"100\",\"3\":\"men\",\"4\":\"11.0\"},{\"1\":\"1908\",\"2\":\"100\",\"3\":\"men\",\"4\":\"10.8\"},{\"1\":\"1912\",\"2\":\"100\",\"3\":\"men\",\"4\":\"10.8\"},{\"1\":\"1916\",\"2\":\"100\",\"3\":\"men\",\"4\":\"NA\"},{\"1\":\"1920\",\"2\":\"100\",\"3\":\"men\",\"4\":\"10.8\"},{\"1\":\"1924\",\"2\":\"100\",\"3\":\"men\",\"4\":\"10.6\"},{\"1\":\"1928\",\"2\":\"100\",\"3\":\"men\",\"4\":\"10.8\"},{\"1\":\"1932\",\"2\":\"100\",\"3\":\"men\",\"4\":\"10.3\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nì´ ìë£Œë¥¼ ì´ìš©í•˜ì—¬ ë‹¬ë¦¬ê¸° ì¢…ëª©ë³„ ìµœê³  ê¸°ë¡ì— ëŒ€í•œ ì‹œë„í‘œë¥¼ ì„±ë³„ë¡œ ë‚˜ëˆ„ì–´ì„œ ê·¸ë ¤ë³´ì•˜ìŠµë‹ˆë‹¤. ì°¸ê³ ë¡œ, 1916, 1940, 1944ë…„ì˜ ê²½ìš° ì„¸ê³„ëŒ€ì „ìœ¼ë¡œ ì¸í•´ ê²°ì¸¡ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggplot(olympic_running, aes(x = Year, y = Time, colour = Sex)) +\n  geom_line() +\n  geom_point(size = 1) +\n  facet_wrap(~ Length, scales = \"free_y\", nrow = 2) + \n  theme_minimal() + \n  scale_color_brewer(palette = \"Dark2\") + \n  theme(legend.position = \"bottom\", legend.title = element_blank()) +\n  ylab(\"Running time (seconds)\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/olympic-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n<!-- <a href='https://feasts.tidyverts.org'><img src='logo_feasts.png' align=\"right\" height=\"138.5\" /></a> -->\n\n## 3 feasts\n\n{feasts}ëŠ” Feature Extraction And Statistics for Time Seriesì˜ ì•½ìë¡œ, ì‹œê³„ì—´ ìë£Œë¶„ì„ì— ì“°ì´ëŠ” ì—¬ëŸ¬ê°€ì§€ íˆ´ì„ ì œê³µí•´ì¤ë‹ˆë‹¤. tsibble ê°ì²´ì™€ í•¨ê»˜ ë™ì‘í•˜ë©°, ì‹œê³„ì—´ì˜ ë¶„í•´, feature ì¶”ì¶œ(e.g. ì¶”ì„¸, ê³„ì ˆì„±), ì‹œê°í™” ë“±ì„ ìˆ˜í–‰í•  ë•Œ ì“°ì…ë‹ˆë‹¤. ì•„ìš¸ëŸ¬, {feasts}ë¥¼ í†µí•œ ì‹œê³„ì—´ ìë£Œë¶„ì„ì€ ë‹¤ìŒ ì„¹ì…˜ì—ì„œ ì†Œê°œí•  tidyverts ecosystemì˜ ì˜ˆì¸¡ ëª¨ë¸ë§ ë¶€ë¶„ì„ ë‹´ë‹¹í•˜ëŠ” {fable} íŒ¨í‚¤ì§€ì™€ ê¸´ë°€í•˜ê²Œ ê²°í•©í•˜ì—¬ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n### 3.1 Graphics\n\nì‹œê°í™”ëŠ” ì£¼ë¡œ ì‹œê³„ì—´ ìë£Œì˜ íŒ¨í„´ì„ ì´í•´í•˜ê¸° ìœ„í•œ ì²« ë‹¨ê³„ì— ë§ì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. {feasts}ëŠ” ì‹œê³„ì—´ì˜ íŒ¨í„´ì„ {ggplot2}ë¥¼ ì‚¬ìš©í•´ ììœ ë¡­ê²Œ ì»¤ìŠ¤í…€í•  ìˆ˜ ìˆëŠ” ê·¸ë˜í”½ì„ ì œê³µí•©ë‹ˆë‹¤. ì²« ë²ˆì§¸ë¡œëŠ” `gg_season`ì„ ì´ìš©í•œ ê³„ì ˆì„±(seasonality) ì‹œê°í™”ì…ë‹ˆë‹¤. ì‹œê°í™”ì— ì‚¬ìš©ëœ ìë£Œ `tsibbledata::aus_production`ì€ í˜¸ì£¼ì˜ ë§¥ì£¼, ë‹´ë°° ë“±ì˜ í’ˆëª©ì— ê´€í•œ ë¶„ê¸°ë³„ ìƒì‚°ì§€í‘œ ì¶”ì •ì¹˜ì— ê´€í•œ ìë£Œì…ë‹ˆë‹¤. ë§¥ì£¼ì˜ ë¶„ê¸°ë³„ ìƒì‚°ì§€í‘œì— ê´€í•œ ê³„ì ˆì„± ì‹œê°í™”ë¥¼ ìˆ˜í–‰í•´ë³´ì•˜ìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\naus_production %>% \n  gg_season(Beer)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/season-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\në‹¤ìŒìœ¼ë¡œ `gg_subseries()`ë¥¼ ì´ìš©í•˜ë©´ ì‹œê³„ì—´ì˜ ê° seasonë³„ë¡œ ì‹œê°í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `aus_production`ê³¼ ê°™ì€ ë¶„ê¸°ë³„ ìë£Œì˜ ê²½ìš° ë¶„ê¸°ë³„ íŒ¨í„´ì— ëŒ€í•œ ì‹œê°í™”ë¥¼ ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\naus_production %>% \n  gg_subseries(Beer)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/subseries-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n`gg_lag()`ë¥¼ ì´ìš©í•˜ë©´ ì›ìë£Œì™€ ì‹œì°¨(lag)ì˜ ì‚°ì ë„ë¥¼ seasonë³„ë¡œ ë‚˜ëˆ„ì–´ ê·¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\naus_production %>% \n  filter(year(Quarter) > 1991) %>% \n  gg_lag(Beer, geom = \"point\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/lag-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\në¶„ê¸°ë³„ ìë£Œì˜ íŠ¹ì„±ìƒ, lag 4ì™€ 8 ê·¸ë¦¼ì„ ë³´ë©´ ê° seasonë³„ë¡œ ì›ìë£Œì™€ì˜ ê´€ê³„ê°€ $y=x$ ì§ì„ ì— ì˜ ë†“ì—¬ìˆëŠ” ê²ƒì„ ìºì¹˜í•  ìˆ˜ ìˆì£ . ë§ˆì§€ë§‰ìœ¼ë¡œ ACF ê·¸ë¦¼ë„ ì†ì‰½ê²Œ ê·¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\naus_production %>% \n  ACF(Beer) %>% \n  autoplot()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/acf-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### 3.2 Decompositions\n\nì‹œê³„ì—´ ë¶„í•´(decomposition)ëŠ” ì‹œê³„ì—´ ìë£Œë¶„ì„ì—ì„œ í”íˆ ìˆ˜í–‰ë˜ëŠ” ì‘ì—… ì¤‘ í•˜ë‚˜ì´ë©°, ì´ëŠ” ì‹œê³„ì—´ì— ëŒ€í•œ íŒ¨í„´ì„ ì´í•´í•˜ëŠ”ë°ì— í° ë„ì›€ì„ ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ì¶”í›„ ì˜ˆì¸¡ ëª¨ë¸ë§ì„ ì •êµí•˜ê²Œ í•˜ëŠ” ê²ƒì—ë„ ìƒë‹¹í•œ ë„ì›€ì„ ì¤€ë‹¤. ì¦‰, ì‹œê³„ì—´ ë¶„í•´ëŠ” ë³¸ì¸ì´ ë¶„ì„í•˜ê³ ì í•˜ëŠ” ì‹œê³„ì—´ì˜ íŒ¨í„´ì„ ì¢€ ë” ì •êµí•˜ê²Œ ìºì¹˜í•˜ê³  ì˜ˆì¸¡ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ëª©ì ìœ¼ë¡œ ê¼­ í•„ìš”ë¡œ ë˜ëŠ” ì‚¬ì „ ì‘ì—…ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë³¸ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” {feasts}ì—ì„œ ì œê³µí•˜ê³  ìˆëŠ” 2ê°€ì§€ ì‹œê³„ì—´ ë¶„í•´ ë°©ë²•ì— ëŒ€í•´ ì†Œê°œí•˜ë ¤ê³  í•©ë‹ˆë‹¤.\n\n#### 3.2.1 Classical decompostion\n\nclassical decompostionì€ 1920ë…„ëŒ€ì— ê³ ì•ˆëœ ë°©ë²•ì…ë‹ˆë‹¤. ì˜¤ë˜ëœ ë°©ë²•ë¡ ì¸ ë§Œí¼ ìš”ì¦˜ ì“°ì´ëŠ” ì‹œê³„ì—´ ë¶„í•´ ë°©ë²•ë“¤ì˜ ì´ˆì„ì´ ë˜ëŠ” ë°©ë²•ì´ë¼ê³  í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ë¥¸ ë°©ë²•ë“¤ì— ë¹„í•´ ìƒëŒ€ì ìœ¼ë¡œ ê°„ë‹¨í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. classical decompostionì€ ê°€ë²• ë¶„í•´ì™€ ìŠ¹ë²• ë¶„í•´ê°€ ìˆìŠµë‹ˆë‹¤. ë‘ ë°©ë²•ì€ ê³„ì ˆì„±ì˜ ë°˜ì˜ ë°©ì‹ì— ë”°ë¼ ë‚˜ë‰©ë‹ˆë‹¤(e.g. ë¶„ê¸°ë³„ ìë£Œ $m = 4$, ì›”ë³„ ìë£Œ $m = 12$, ì¼ë³„ ìë£Œ $m = 7$). ë³´í†µ ê°€ë²• classical decompostionì˜ ê²½ìš° ê³„ì ˆì„±ì´ ì¶”ì„¸ì— ë”°ë¼ ë¬´ê´€í•˜ê²Œ ì¼ì •í•œ í¬ê¸°ë¥¼ ìœ ì§€í•  ë•Œ ì‚¬ìš©í•˜ë©°, ë°˜ëŒ€ë¡œ ê³„ì ˆì„±ì˜ í¬ê¸°ê°€ ì¶”ì„¸ì˜ í¬ê¸°ì— ë”°ë¼ ë³€í™”í•˜ëŠ” ê²½ìš°ì—ëŠ” ìŠ¹ë²• classical decompostionì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ìŠ¹ë²• ê³„ì ˆì„± classical decompostionëŠ” ê³„ì ˆ ì„±ë¶„ì´ ì—°ë„ì— ë”°ë¼ ìƒìˆ˜ë¼ê³  ê°€ì •í•œì±„ë¡œ ì§„í–‰ë˜ë©°, ìŠ¹ë²• ê³„ì ˆì„±ì—ì„œ ê³„ì ˆ ì„±ë¶„ì„ í˜•ì„±í•˜ëŠ” $m$ì€ ê³„ì ˆ ì§€ìˆ˜(seasonal indices)ë¼ ë¶ˆë¦¬ê¸°ë„ í•©ë‹ˆë‹¤.\n\nclassical decompostionì˜ ìì„¸í•œ ë¶„í•´ ê³¼ì •ì€ [ì—¬ê¸°](https://otexts.com/fpp3/classical-decomposition.html)ë¥¼ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ë°”ë¡œ Rì„ ì´ìš©í•œ íŠœí† ë¦¬ì–¼ì„ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤. ì•ì„œ ì‚¬ìš©í–ˆë˜ ìë£Œì˜ ë§¥ì£¼ ìƒì‚°ì§€í‘œë¥¼ ê°€ë²• classical decompositionì„ í†µí•´ ë¶„í•´í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndcmp <- aus_production %>%\n    model(classical_decomposition(Beer, type = \"additive\"))\ncomponents(dcmp)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\".model\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Quarter\"],\"name\":[2],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"Beer\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"trend\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"seasonal\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"random\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"season_adjust\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1956 Q1\",\"3\":\"284\",\"4\":\"NA\",\"5\":\"2.131016\",\"6\":\"NA\",\"7\":\"281.8690\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1956 Q2\",\"3\":\"213\",\"4\":\"NA\",\"5\":\"-42.519927\",\"6\":\"NA\",\"7\":\"255.5199\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1956 Q3\",\"3\":\"227\",\"4\":\"255.250\",\"5\":\"-28.505776\",\"6\":\"0.2557761\",\"7\":\"255.5058\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1956 Q4\",\"3\":\"308\",\"4\":\"254.375\",\"5\":\"68.894687\",\"6\":\"-15.2696868\",\"7\":\"239.1053\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1957 Q1\",\"3\":\"262\",\"4\":\"257.375\",\"5\":\"2.131016\",\"6\":\"2.4939837\",\"7\":\"259.8690\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1957 Q2\",\"3\":\"228\",\"4\":\"260.000\",\"5\":\"-42.519927\",\"6\":\"10.5199271\",\"7\":\"270.5199\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1957 Q3\",\"3\":\"236\",\"4\":\"262.750\",\"5\":\"-28.505776\",\"6\":\"1.7557761\",\"7\":\"264.5058\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1957 Q4\",\"3\":\"320\",\"4\":\"264.625\",\"5\":\"68.894687\",\"6\":\"-13.5196868\",\"7\":\"251.1053\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1958 Q1\",\"3\":\"272\",\"4\":\"265.375\",\"5\":\"2.131016\",\"6\":\"4.4939837\",\"7\":\"269.8690\"},{\"1\":\"classical_decomposition(Beer, type = \\\"additive\\\")\",\"2\":\"1958 Q2\",\"3\":\"233\",\"4\":\"264.625\",\"5\":\"-42.519927\",\"6\":\"10.8949271\",\"7\":\"275.5199\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në¨¼ì €, ë¶„í•´ëœ ì‹œê³„ì—´ì˜ ìš”ì†Œë“¤ì€ `componenets()`ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³ , ì´ `components()`ì— ëŒ€í•´ `autoplot()`ì„ ìˆ˜í–‰í•´ì£¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹œê°í™”ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndcmp %>%\n    components() %>% \n    autoplot() +\n    labs(title = \"Classical additive decomposition of Quarterly production of beer in Australia\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/classical-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n#### 3.2.2 STL decomposition\n\nSTLì€ \"Seasonal and Trend decomposition using Loess\"ì˜ ì¤€ë§ë¡œ ë‹¤ì¬ë‹¤ëŠ¥(versatile)í•˜ê³  ë¡œë²„ìŠ¤íŠ¸í•œ ì‹œê³„ì—´ ë¶„í•´ ë°©ë²•ì— í•´ë‹¹í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ì—¬ê¸°ì„œ loessë€ [Local regression](https://be-favorite.tistory.com/58?category=923110)ì˜ ì¤€ë§ë¡œ ìë£Œë¥¼ ë¹„ì„ í˜•ìœ¼ë¡œ ì¶”ì •í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì— í•´ë‹¹í•©ë‹ˆë‹¤. STLì€ ì•ì„œ ì†Œê°œí•œ classical decomposition, ê·¸ë¦¬ê³  {feasts}ì—ì„œ ì œê³µí•˜ëŠ” ë˜ ë‹¤ë¥¸ ì‹œê³„ì—´ ë¶„í•´ ë°©ë²• [SEATS, X-11](https://otexts.com/fpp3/methods-used-by-official-statistics-agencies.html)ê³¼ ë¹„êµí•˜ì—¬ ëª‡ëª‡ ì´ì ì„ ê°–ëŠ”ë‹¤. ìì„¸í•œ ì‚¬í•­ì€ [ì—¬ê¸°](https://otexts.com/fpp3/stl.html)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”. ë³¸ ê¸€ì€ tidyverts ecosystemì— ëŒ€í•œ ì†Œê°œ ì´ë¯€ë¡œ, deepí•œ ì´ë¡  ì •ë¦¬ëŠ” ì¶”í›„ì— fpp3 ì±…ì„ ê³µë¶€í•˜ë©´ì„œ í•˜ë‚˜í•˜ë‚˜ ì •ë¦¬í•´ë‚˜ê°€ê² ìŠµë‹ˆë‹¤. ì¼ë‹¨ ë°”ë¡œ ì‹¤ìŠµìœ¼ë¡œ ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.ğŸ˜Š ë‹¤ìŒì€ STL decompositionì„ ì´ìš©í•˜ì—¬ ì‹œê³„ì—´ì˜ ì¶”ì„¸ ìš”ì†ŒëŠ” `window = 7`ì„ í†µí•´ ì¢€ ë” flexibleí•˜ê²Œ ì¶”ì •í•˜ê³ , ê³„ì ˆ íŒ¨í„´ì˜ ê²½ìš°ëŠ” `window = \"periodic\"`ìœ¼ë¡œ í•˜ì—¬ ê³ ì •(fixed)ë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤(see `?STL` for details). ì—¬ê¸°ì„œ. `window`ë€, ì°½ì„ ë§í•˜ë©° ìë£Œë¥¼ ì—¬ëŸ¬ ì°½ìœ¼ë¡œ ì˜ê²Œ ìª¼ê°¤ìˆ˜ë¡ ë” flexibleí•˜ê³  ë³µì¡í•œ í•¨ìˆ˜ë¥¼ ì¶”ì •í•˜ê²Œ ë©ë‹ˆë‹¤. [splines](https://be-favorite.tistory.com/56?category=923110)ì— ì§€ì‹ì´ ìˆëŠ” ë¶„ë“¤ì€ ì´í•´í•˜ê¸° ì‰¬ìš¸ê±°ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\naus_production %>%\n  model(\n    STL(Beer ~ trend(window = 7) + season(window = \"periodic\"),\n        robust = TRUE)) %>%\n  components() %>%\n  autoplot()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/STL-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n### 3.3 Feature extraction and statistics\n\n{feast}ì—ì„œ ì†Œê°œí•  ë§ˆì§€ë§‰ ê¸°ëŠ¥ì€ ì‹œê³„ì—´ì˜ feature(e.g. ACF)ì™€ í†µê³„ëŸ‰(e.g. í‰ê· )ì„ ë½‘ì•„ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤. {feast}ì—ì„œëŠ” `feature()` í•¨ìˆ˜ë¥¼ í†µí•´ ë§ì€ ì¢…ë¥˜ì˜ featuresë“¤ì— ëŒ€í•œ ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤ë§Œ, ë³¸ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ì‹œê³„ì—´ì˜ í‰ê· , ë¶„ìœ„ìˆ˜, ACFë¥¼ ë½‘ì•„ë‚´ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œë§Œ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤(see `?feature` for details). ê·¸ ì™¸ ë‹¤ë¥¸ featuresë“¤ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹œë‹¤ë©´, [ì—¬ê¸°](https://otexts.com/fpp3/some-simple-statistics.html)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\n\n#### 3.3.1 Some simple statistics\n\në¨¼ì €, ì‹œê³„ì—´ì˜ í‰ê· ê³¼ ë¶„ìœ„ìˆ˜ë¥¼ ë½‘ëŠ” ë°©ë²•ì— ëŒ€í•´ ì†Œê°œí•˜ê² ìŠµë‹ˆë‹¤. í‰ê· , ë¶„ìœ„ìˆ˜ ë“± ì‹œê³„ì—´ì˜ ê¸°ë³¸ì ì¸ í†µê³„ëŸ‰ì€ `feature()`ì™€ Rì˜ ê¸°ë³¸ í•¨ìˆ˜(e.g. `mean()`, `median()`)ë“¤ì„ ì´ìš©í•´ ê°„í¸í•˜ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì´ìš©í•  ìë£Œ `tourism()`ì€ ì§€ì—­, ì£¼, ëª©ì ë³„ë¡œ ë‚˜ëˆ ì§„ 1998-2016ë…„ ë¶„ê¸°ë³„ í˜¸ì£¼ ì—¬í–‰ê°ìˆ˜ì— ê´€í•œ ìë£Œë¡œ, ì§€ì—­, ì£¼, ì—¬í–‰ ëª©ì ë³„ ì—¬í–‰ê° ìˆ˜ì˜ ì „ì²´ í‰ê· ê³¼ ë¶„ìœ„ìˆ˜ë¥¼ ê³„ì‚°í•´ë´¤ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntourism %>%\n    features(Trips, \n             list(mean = mean, quantile))\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"mean\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"0%\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"25%\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"50%\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"75%\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"100%\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"155.527910\",\"5\":\"68.7253928\",\"6\":\"133.893462\",\"7\":\"152.5766183\",\"8\":\"176.935536\",\"9\":\"242.494368\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Holiday\",\"4\":\"156.543437\",\"5\":\"108.0330401\",\"6\":\"134.626822\",\"7\":\"153.9450073\",\"8\":\"172.256676\",\"9\":\"223.557406\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Other\",\"4\":\"56.563450\",\"5\":\"25.9018459\",\"6\":\"43.865901\",\"7\":\"53.8094631\",\"8\":\"62.523135\",\"9\":\"107.494657\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Visiting\",\"4\":\"205.193667\",\"5\":\"136.6111544\",\"6\":\"178.915998\",\"7\":\"205.5817356\",\"8\":\"229.299111\",\"9\":\"269.535618\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"2.664236\",\"5\":\"0.0000000\",\"6\":\"0.000000\",\"7\":\"1.2554337\",\"8\":\"3.920368\",\"9\":\"28.601515\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Holiday\",\"4\":\"10.467276\",\"5\":\"0.0000000\",\"6\":\"5.767673\",\"7\":\"8.5159661\",\"8\":\"14.059997\",\"9\":\"35.751337\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Other\",\"4\":\"1.404931\",\"5\":\"0.0000000\",\"6\":\"0.000000\",\"7\":\"0.9075955\",\"8\":\"2.093167\",\"9\":\"8.953163\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Visiting\",\"4\":\"14.202530\",\"5\":\"0.7776381\",\"6\":\"8.907923\",\"7\":\"12.2066190\",\"8\":\"16.806339\",\"9\":\"81.102109\"},{\"1\":\"Alice Springs\",\"2\":\"Northern Territory\",\"3\":\"Business\",\"4\":\"14.570929\",\"5\":\"1.0084255\",\"6\":\"9.133369\",\"7\":\"13.3241614\",\"8\":\"18.456365\",\"9\":\"34.077065\"},{\"1\":\"Alice Springs\",\"2\":\"Northern Territory\",\"3\":\"Holiday\",\"4\":\"31.887332\",\"5\":\"2.8085551\",\"6\":\"16.850803\",\"7\":\"31.5237822\",\"8\":\"44.784402\",\"9\":\"76.541382\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n#### 3.3.2 ACF features\n\nACFì— ê´€í•œ ì •ë³´ëŠ” `feat_acf()`ë¥¼ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤. `feat_acf()`ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ACFì™€ ê´€ë ¨í•œ 6ê°€ì§€ ë˜ëŠ” ìµœëŒ€ 7ê°€ì§€ì˜ featuresë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤(see `?feat_acf()` for details):\n\n-   ì› ê³„ì—´ì˜ 1ì°¨ ìê¸°ìƒê´€ê³„ìˆ˜\n-   ì› ê³„ì—´ì˜ 1ì°¨-10ì°¨ ìê¸°ìƒê´€ê³„ìˆ˜ì˜ ì œê³±í•©\n-   1ì°¨ ì°¨ë¶„ ê³„ì—´ì˜ 1ì°¨ ìê¸°ìƒê´€ê³„ìˆ˜\n-   1ì°¨ ì°¨ë¶„ ê³„ì—´ì˜ 1ì°¨-10ì°¨ ìê¸°ìƒê´€ê³„ìˆ˜ì˜ ì œê³±í•©\n-   2ì°¨ ì°¨ë¶„ ê³„ì—´ì˜ 1ì°¨ ìê¸°ìƒê´€ê³„ìˆ˜\n-   2ì°¨ ì°¨ë¶„ ê³„ì—´ì˜ 1ì°¨-10ì°¨ ìê¸°ìƒê´€ê³„ìˆ˜ì˜ ì œê³±í•©\n-   (ê³„ì ˆ ì‹œê³„ì—´ì— ëŒ€í•´) ì²«ë²ˆì§¸ ê³„ì ˆ ì‹œì°¨(seasonal lag)ì—ì„œì˜ ìê¸°ìƒê´€ê³„ìˆ˜\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntourism %>% \n  features(Trips, feat_acf)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"acf1\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"acf10\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"diff1_acf1\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"diff1_acf10\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"diff2_acf1\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"diff2_acf10\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"season_acf1\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"0.033270698\",\"5\":\"0.1306455\",\"6\":\"-0.5196224\",\"7\":\"0.4625367\",\"8\":\"-0.6764291\",\"9\":\"0.7413571\",\"10\":\"0.20087547\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Holiday\",\"4\":\"0.045569980\",\"5\":\"0.3718981\",\"6\":\"-0.3426251\",\"7\":\"0.6143649\",\"8\":\"-0.4868330\",\"9\":\"0.5582436\",\"10\":\"0.35115135\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Other\",\"4\":\"0.516805734\",\"5\":\"1.1535975\",\"6\":\"-0.4086204\",\"7\":\"0.3828913\",\"8\":\"-0.6751196\",\"9\":\"0.7923533\",\"10\":\"0.34178065\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Visiting\",\"4\":\"0.068365364\",\"5\":\"0.2942366\",\"6\":\"-0.3936543\",\"7\":\"0.4522912\",\"8\":\"-0.5179591\",\"9\":\"0.4472958\",\"10\":\"0.34493047\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"0.070914982\",\"5\":\"0.1344731\",\"6\":\"-0.5795037\",\"7\":\"0.4145373\",\"8\":\"-0.7504035\",\"9\":\"0.7460039\",\"10\":\"-0.06280837\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Holiday\",\"4\":\"0.131319990\",\"5\":\"0.3127099\",\"6\":\"-0.5361535\",\"7\":\"0.5002113\",\"8\":\"-0.7163426\",\"9\":\"0.9063143\",\"10\":\"0.20804204\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Other\",\"4\":\"0.261142556\",\"5\":\"0.3301688\",\"6\":\"-0.2532267\",\"7\":\"0.3170873\",\"8\":\"-0.4574704\",\"9\":\"0.3922350\",\"10\":\"0.07453409\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Visiting\",\"4\":\"0.139166739\",\"5\":\"0.1167866\",\"6\":\"-0.4720059\",\"7\":\"0.2386155\",\"8\":\"-0.6255751\",\"9\":\"0.4077128\",\"10\":\"0.16977219\"},{\"1\":\"Alice Springs\",\"2\":\"Northern Territory\",\"3\":\"Business\",\"4\":\"0.217424370\",\"5\":\"0.3666344\",\"6\":\"-0.4995855\",\"7\":\"0.3805574\",\"8\":\"-0.6579956\",\"9\":\"0.5870383\",\"10\":\"0.31531357\"},{\"1\":\"Alice Springs\",\"2\":\"Northern Territory\",\"3\":\"Holiday\",\"4\":\"-0.006604511\",\"5\":\"2.1133742\",\"6\":\"-0.1527905\",\"7\":\"2.1134358\",\"8\":\"-0.2742857\",\"9\":\"1.5507370\",\"10\":\"0.72858887\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në§¨ ë§ˆì§€ë§‰ ì—´ì´ ì²«ë²ˆì§¸ ê³„ì ˆ ì‹œì°¨ì—ì„œì˜ ìê¸°ìƒê´€ê³„ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ”ë°, ë³¸ ìë£Œì˜ ê²½ìš° ë¶„ê¸°ë³„ ìë£Œì— í•´ë‹¹í•˜ë¯€ë¡œ ê³„ì ˆ ì£¼ê¸°ëŠ” 4ì— í•´ë‹¹í•©ë‹ˆë‹¤. ì¦‰, ë³¸ ìë£Œì—ì„œ ì²«ë²ˆì§¸ ê³„ì ˆ ì‹œì°¨ì—ì„œì˜ ìê¸°ìƒê´€ê³„ìˆ˜ëŠ” ì› ê³„ì—´ì˜ ì‹œì°¨ 4ì—ì„œì˜ ACF ê°’ì„ ë‚˜íƒ€ë‚¸ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntourism %>% \n  features(Trips, feat_acf) %>% \n  select(Region:Purpose, season_acf1)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"season_acf1\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"0.20087547\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Holiday\",\"4\":\"0.35115135\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Other\",\"4\":\"0.34178065\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Visiting\",\"4\":\"0.34493047\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"-0.06280837\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Holiday\",\"4\":\"0.20804204\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Other\",\"4\":\"0.07453409\"},{\"1\":\"Adelaide Hills\",\"2\":\"South Australia\",\"3\":\"Visiting\",\"4\":\"0.16977219\"},{\"1\":\"Alice Springs\",\"2\":\"Northern Territory\",\"3\":\"Business\",\"4\":\"0.31531357\"},{\"1\":\"Alice Springs\",\"2\":\"Northern Territory\",\"3\":\"Holiday\",\"4\":\"0.72858887\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nì›ìë£Œì— ëŒ€í•œ ACFë¥¼ êµ¬í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹œì°¨ 4ì—ì„œì˜ ìê¸°ìƒê´€ê³„ìˆ˜ì™€ ë™ì¼í•œ ê°’ì„ ê°€ì§ì„ ì•Œ ìˆ˜ ìˆì£ :\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntourism %>% \n    ACF(Trips)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"lag\"],\"name\":[4],\"type\":[\"lag\"],\"align\":[\"right\"]},{\"label\":[\"acf\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"1Q\",\"5\":\"0.03327070\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"2Q\",\"5\":\"0.05904106\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"3Q\",\"5\":\"0.05356339\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"4Q\",\"5\":\"0.20087547\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"5Q\",\"5\":\"0.06449064\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"6Q\",\"5\":\"0.10372714\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"7Q\",\"5\":\"-0.05562396\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"8Q\",\"5\":\"0.22744461\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"9Q\",\"5\":\"0.01284716\"},{\"1\":\"Adelaide\",\"2\":\"South Australia\",\"3\":\"Business\",\"4\":\"10Q\",\"5\":\"-0.11368503\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në³¸ íŠœí† ë¦¬ì–¼ì—ì„œëŠ” ì†Œê°œí•˜ì§€ ì•Šì•˜ì§€ë§Œ, `feature()`ë¥¼ ì´ìš©í•œ ì‹œê³„ì—´ feature extractionê³¼ ì—°ê³„í•˜ì—¬ ë‹¤ì–‘í•œ ì‹œê°í™”ë„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¼­ ì°¸ê³ í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤: <https://otexts.com/fpp3/stlfeatures.html>\n\n<!-- <a href='https://fable.tidyverts.org'><img src='logo_fable.png' align=\"right\" height=\"138.5\" /></a> -->\n\n## 4 fable\n\n{fable} íŒ¨í‚¤ì§€ëŠ” tsibble ê°ì²´ì™€ í•¨ê»˜ tidyí•œ formatìœ¼ë¡œ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸ë§ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œí•´ì¤ë‹ˆë‹¤. [{tidymodels}](https://github.com/be-favorite/Tutorial_tidymodels) íŒ¨í‚¤ì§€ì— ëŒ€í•œ ì´í•´ê°€ ìˆìœ¼ì‹  ë¶„ë“¤ì´ë¼ë©´ ì–´ë µì§€ ì•Šìœ¼ì‹¤ê±°ë¼ ìƒê°í•©ë‹ˆë‹¤. {tidymodels}ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ {fable}ì€ ì—¬ëŸ¬ ì‹œê³„ì—´ì— ëŒ€í•´ ì—¬ëŸ¬ ì‹œê³„ì—´ ëª¨í˜•ì— ëŒ€í•œ ì¶”ì •, ë¹„êµ, ê²°í•©, ì˜ˆì¸¡ ë“±ì„ ê°€ëŠ¥í•˜ê²Œí•´ì¤ë‹ˆë‹¤.\n\në³¸ê²©ì ì¸ íŠœí† ë¦¬ì–¼ ì‹œì‘ì— ì•ì„œ, `tourism()` ìë£Œë¥¼ ì´ìš©í•  ê²ƒì´ë©°, 4ê°€ì§€ ì—¬í–‰ ëª©ì (\"business\", \"holiday\", \"visiting friends and relatives\", \"other reasons\")ìœ¼ë¡œ ë¶„í•´í•  ìˆ˜ ìˆëŠ” í˜¸ì£¼ ë©œë²„ë¥¸(Melbourne)ì˜ ì¼ë³„ ì—¬í–‰ê° ìˆ˜ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì— ê´€ì‹¬ì´ ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤. ê° ê³„ì—´ì˜ ì²« ë²ˆì§¸ ê´€ì¸¡ê°’ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntourism_melb <- tourism %>% \n  filter(Region == \"Melbourne\")\ntourism_melb %>% \n    group_by(Purpose) %>% \n    slice(1)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Quarter\"],\"name\":[1],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"Region\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Trips\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"1998 Q1\",\"2\":\"Melbourne\",\"3\":\"Victoria\",\"4\":\"Business\",\"5\":\"405.24297\"},{\"1\":\"1998 Q1\",\"2\":\"Melbourne\",\"3\":\"Victoria\",\"4\":\"Holiday\",\"5\":\"427.82780\"},{\"1\":\"1998 Q1\",\"2\":\"Melbourne\",\"3\":\"Victoria\",\"4\":\"Other\",\"5\":\"79.90985\"},{\"1\":\"1998 Q1\",\"2\":\"Melbourne\",\"3\":\"Victoria\",\"4\":\"Visiting\",\"5\":\"665.56779\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nìš°ë¦¬ê°€ ì¶”ì •í•˜ê³ ì í•˜ëŠ” ë³€ìˆ˜ëŠ” `Trips`(ì¼ë³„ ì—¬í–‰ê° ìˆ˜, ë‹¨ìœ„: ì²œ)ì…ë‹ˆë‹¤. í•´ë‹¹ ê³„ì—´ë“¤ì˜ ì‹œë„í‘œë¥¼ ë³´ë©´, ì¶”ì„¸ì™€ ì•½í•œ ê³„ì ˆì„±ì´ ëª…í™•í•˜ê²Œ ì¡´ì¬í•¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntourism_melb %>% \n  autoplot(Trips)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/melbourne-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n{fable} íŒ¨í‚¤ì§€ì—ì„œ í­ë„“ê²Œ ì“°ì´ëŠ” ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨í˜•ì€ ETSì™€ ARIMA ëª¨í˜•ì…ë‹ˆë‹¤. ë¨¼ì €, ETS ëª¨í˜•ì€ ì¶”ì„¸ ìš”ì†Œì™€ ê³„ì ˆ ìš”ì†Œë¥¼ ê°€ë²•, ìŠ¹ë²•, ê°ì‡ íš¨ê³¼ ë“±ì„ ë°˜ì˜í•˜ì—¬ ì‹œê³„ì—´ì„ ëª¨ë¸ë§í•˜ëŠ” ì§€ìˆ˜í‰í™œë²•(exponential smoothing)ì„ í†µê³„ì  ëª¨í˜•ìœ¼ë¡œ í™•ì¥ì‹œí‚¨ ê²ƒì— í•´ë‹¹í•©ë‹ˆë‹¤. í†µê³„ì  ëª¨í˜•ìœ¼ë¡œì˜ í™•ì¥ì€ ì˜¤ì°¨í•­ $\\epsilon_t$ì— ëŒ€í•´ í†µê³„ì  ë¶„í¬ë¼ í•  ìˆ˜ ìˆëŠ”, í‰ê· ì´ 0ì´ê³  ë¶„ì‚°ì´ $\\sigma^2$ì¸ ê°€ìš°ìŠ¤ ë°±ìƒ‰ì¡ìŒ ê³¼ì •(gaussian white noise process)ì„ ê°€ì •í•¨ìœ¼ë¡œì¨ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì¦‰, ETS ëª¨í˜•ì˜ ì•ŒíŒŒë²³ ê°ê°ì€ E(error, ì˜¤ì°¨), T(trend, ì¶”ì„¸), S(seasonal, ê³„ì ˆì„±)ì„ ë‚˜íƒ€ë‚´ë©°, ê° ìš”ì†Œë“¤ì„ ëª¨ë¸ë§í•˜ëŠ” ë°©ì‹(ê°€ë²•, ìŠ¹ë²•, ê°€ë²•ê°ì‡ (damped), ìŠ¹ë²•ê°ì‡ )ì— ë”°ë¼ ETS ëª¨í˜•ì˜ ì¢…ë¥˜ê°€ ë‚˜ë‰˜ì–´ì§‘ë‹ˆë‹¤. ì•„ìš¸ëŸ¬, ê° ëª¨ë¸ì€ ê´€ì¸¡ëœ ìë£Œë¥¼ ì„¤ëª…í•˜ëŠ” ì¸¡ì •ì‹(measurement equations)ê³¼ ì‹œê°„ì— ë”°ë¼ ë³€í™”í•˜ëŠ” ê´€ì¸¡ë˜ì§€ ì•Šì€ ìš”ì†Œ(level, trend, seasonal)ë“¤ì„ ì„¤ëª…í•˜ëŠ” ìƒíƒœì‹(state equations)ìœ¼ë¡œ êµ¬ì„±ë˜ëŠ”ë°, ì´ëŸ¬í•œ ì´ìœ ì—ì„œ ìš°ë¦¬ëŠ” ETS ëª¨í˜•ì„ í˜ì‹ ìƒíƒœê³µê°„ëª¨í˜•ì„ ì´ë£¨ëŠ” ì§€ìˆ˜í‰í™œë²•(innovations state space models for exponential smoothing)ì´ë¼ê³  í‘œí˜„í•˜ê¸°ë„ í•©ë‹ˆë‹¤(See [here](https://otexts.com/fpp3/ets.html) for detail). ë‘ ë²ˆì§¸ë¡œ, ARIMA ëª¨í˜•ì€ ì‹œê³„ì—´ì˜ í˜„ì¬ê°’ì„ ê³¼ê±°ê°’ê³¼ ê³¼ê±° ì˜ˆì¸¡ ì˜¤ì°¨ë¡œ ì„¤ëª…í•˜ëŠ” ëŒ€í‘œì ì¸ í†µê³„ì  ì‹œê³„ì—´ ì˜ˆì¸¡ëª¨í˜•ìœ¼ë¡œ, ìì„¸í•œ ì„¤ëª…ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤. ARIMA ëª¨í˜•ì— ëŒ€í•œ ê°œë…ì´ ì—†ìœ¼ì‹  ë¶„ë“¤ì€ [ì—¬ê¸°](https://be-favorite.tistory.com/63?category=928223)ë¥¼ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\n\në‘ ëª¨í˜•ì— ëŒ€í•œ ê°„ëµí•œ ê°œë… ì„¤ëª…ì€ ì´ì¯¤ì—ì„œ ë§ˆì¹˜ê¸°ë¡œ í•˜ê³ , ì´ì œ ì´ ëª¨í˜•ë“¤ì„ {fable} íŒ¨í‚¤ì§€ë¥¼ ì´ìš©í•´ ì–´ë–»ê²Œ ì í•©ì„ ìˆ˜í–‰í•˜ë©´ ë˜ëŠ”ì§€ ë³´ê² ìŠµë‹ˆë‹¤. {fable}ì„ ì´ìš©í•œ ëª¨í˜• ì í•©ì€ `model()`ì„ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. `model()`ì„ í†µí•œ ì í•© ê³¼ì •ì€ [{tidymodels}](https://github.com/be-favorite/Tutorial_tidymodels)ì™€ ìœ ì‚¬í•˜ê²Œ ìƒë‹¹íˆ ì§ê´€ì ì¸ ì´ë¦„ì˜ í•¨ìˆ˜ë“¤ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ë¨¼ì €, `ETS()`ì˜ ê²½ìš°ëŠ” Rì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ëª¨í˜•ì‹ì˜ specificationë¥¼ ë”°ë¼ì„œ ê° ìš”ì†Œë¥¼ ë°˜ì˜í•  ìˆ˜ ìˆê²Œ í•´ì£¼ë©°, ë³¸ ì˜ˆì œì—ì„œëŠ” ì¶”ì„¸ ìš”ì†Œë§Œ ê°€ë²•ì ìœ¼ë¡œ ì„¤ì •í•´ì£¼ê³  ë‚˜ë¨¸ì§€ ìš”ì†ŒëŠ” ìë™ìœ¼ë¡œ ì„ íƒë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤(AICCë¥¼ ê¸°ì¤€ìœ¼ë¡œ, see `?ETS` for details). ê·¸ë¦¬ê³ , ARIMA ëª¨í˜•ì€ `ARIMA()` í•¨ìˆ˜ë¡œ ì í•©í•  ìˆ˜ ìˆìœ¼ë©°, í•´ë‹¹ í•¨ìˆ˜ëŠ” {forecast} íŒ¨í‚¤ì§€ì˜ `auto.arima`ì™€ ìœ ì‚¬í•˜ê²Œ default ì˜µì…˜ìœ¼ë¡œ AICC ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ìµœì ì˜ ëª¨í˜•ì„ ì„ íƒí•´ ì¤ë‹ˆë‹¤(see `?ARIMA`). `model()`ì„ í†µí•´ ì í•©ì´ ì´ë£¨ì–´ì§„ ëª¨í˜• ê°ì²´ëŠ” tidyí•œ í¬ë§¥ì˜ ëª¨í˜• í…Œì´ë¸”ë¡œ ê²°ê³¼ë¥¼ ë°˜í™˜í•´ì¤ë‹ˆë‹¤. ì´ë¥¼ ì´ì œë¶€í„° mable(model table) ê°ì²´ë¼ ì¹­í•˜ê² ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit <- tourism_melb %>% \n  model(\n    ets = ETS(Trips ~ trend(\"A\")),\n    arima = ARIMA(Trips)\n  )\nfit\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"ets\"],\"name\":[4],\"type\":[\"lst_mdl\"],\"align\":[\"right\"]},{\"label\":[\"arima\"],\"name\":[5],\"type\":[\"lst_mdl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"<lst_mdl>\",\"5\":\"<lst_mdl>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Holiday\",\"4\":\"<lst_mdl>\",\"5\":\"<lst_mdl>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Other\",\"4\":\"<lst_mdl>\",\"5\":\"<lst_mdl>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Visiting\",\"4\":\"<lst_mdl>\",\"5\":\"<lst_mdl>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nmable ê°ì²´ì˜ í–‰ì€ ê° ì‹œê³„ì—´ë¡œ ì´ë£¨ì–´ì ¸ìˆìœ¼ë©°, ì—´ì€ ê° ëª¨í˜•ì˜ specificationì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. `fit`ì´ ë°˜í™˜í•˜ëŠ” ê²°ê³¼ë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ì´, ì í•©ëœ ETS ëª¨í˜•ì˜ ì¶”ì„¸ ìš”ì†ŒëŠ” ëª¨ë‘ ê°€ë²•ì ìœ¼ë¡œ ê³ ë ¤ë˜ì—ˆìœ¼ë©°, ë‚˜ë¨¸ì§€ ìš”ì†Œë“¤ì€ ê° ì‹œê³„ì—´ì— ë”°ë¼ì„œ ìµœì ì˜ ì„±ë¶„ì´ ìë™ìœ¼ë¡œ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ARIMA ëª¨í˜• ë˜í•œ AICC ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ í•œ ìµœì ì˜ ì°¨ìˆ˜ë“¤ì´ ë°˜ì˜ë˜ì–´ ëª¨í˜• ì í•©ì´ ì˜ ì´ë£¨ì–´ì§„ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ì´ mable ê°ì²´ë¡œ ìš°ë¦¬ëŠ” ëª¨ë¸ ì í•© ë‹¨ê³„ì—ì„œ í•„ìš”í•œ ëª¨ë“  ì‘ì—…ì„ tidyí•œ í¬ë§·ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në¨¼ì €, `coef()` ë˜ëŠ” `tidy()`ë¥¼ í†µí•´ ëª¨í˜•ìœ¼ë¡œë¶€í„° ì¶”ì •ëœ ê³„ìˆ˜ë“¤ì„ ì¶”ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•„ìš¸ëŸ¬, ì‚¬ì „ì— `select()` í•¨ìˆ˜ë¥¼ í†µí•´ íŠ¹ì • ëª¨í˜•ì— ëŒ€í•œ ê³„ìˆ˜ ê°’ë§Œì„ ë½‘ì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit %>%\n  select(Region, State, Purpose, arima) %>%\n  coef()\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"term\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"estimate\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"std.error\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"statistic\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"p.value\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"arima\",\"5\":\"ma1\",\"6\":\"-0.5550787\",\"7\":\"0.12978931\",\"8\":\"-4.2767679\",\"9\":\"5.264967e-05\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"arima\",\"5\":\"ma2\",\"6\":\"-0.2335105\",\"7\":\"0.12925315\",\"8\":\"-1.8066134\",\"9\":\"7.463048e-02\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"arima\",\"5\":\"sar1\",\"6\":\"0.9461540\",\"7\":\"0.06358434\",\"8\":\"14.8802991\",\"9\":\"1.264465e-24\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"arima\",\"5\":\"sma1\",\"6\":\"-0.7717918\",\"7\":\"0.14496638\",\"8\":\"-5.3239364\",\"9\":\"9.280014e-07\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"arima\",\"5\":\"constant\",\"6\":\"0.1930140\",\"7\":\"0.21351305\",\"8\":\"0.9039915\",\"9\":\"3.687484e-01\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Holiday\",\"4\":\"arima\",\"5\":\"ma1\",\"6\":\"-0.9309040\",\"7\":\"0.08513995\",\"8\":\"-10.9338093\",\"9\":\"1.774207e-17\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Holiday\",\"4\":\"arima\",\"5\":\"constant\",\"6\":\"3.6493015\",\"7\":\"0.57089401\",\"8\":\"6.3922575\",\"9\":\"1.057092e-08\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Other\",\"4\":\"arima\",\"5\":\"ma1\",\"6\":\"-0.7495227\",\"7\":\"0.07080228\",\"8\":\"-10.5861391\",\"9\":\"8.192162e-17\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Other\",\"4\":\"arima\",\"5\":\"constant\",\"6\":\"1.2363219\",\"7\":\"0.63994797\",\"8\":\"1.9319100\",\"9\":\"5.695604e-02\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Visiting\",\"4\":\"arima\",\"5\":\"ma1\",\"6\":\"-0.8376624\",\"7\":\"0.06524840\",\"8\":\"-12.8380524\",\"9\":\"5.030275e-21\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n`tidy`ë¡œ ìˆ˜í–‰í•´ë„ ê²°ê³¼ëŠ” ê°™ìŠµë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ `glance()`ë¥¼ ì´ìš©í•˜ë©´ ëª¨í˜•ì˜ ì í•© ê²°ê³¼ë¥¼ ì •ë³´ ê¸°ì¤€(e.g. AIC, BIC)ê³¼ ì”ì°¨ì˜ ë¶„ì‚° ë“±ìœ¼ë¡œ ìš”ì•½í•´ì¤ë‹ˆë‹¤.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit %>% \n    glance()\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"sigma2\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"log_lik\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"AIC\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"AICc\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"BIC\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MSE\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"AMSE\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MAE\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ar_roots\"],\"name\":[13],\"type\":[\"list\"],\"align\":[\"right\"]},{\"label\":[\"ma_roots\"],\"name\":[14],\"type\":[\"list\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"3.533069e+03\",\"6\":\"-497.8635\",\"7\":\"1013.7271\",\"8\":\"1016.2985\",\"9\":\"1035.1653\",\"10\":\"3179.7624\",\"11\":\"3519.8450\",\"12\":\"42.85576504\",\"13\":\"<NULL>\",\"14\":\"<NULL>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"arima\",\"5\":\"3.668008e+03\",\"6\":\"-435.0687\",\"7\":\"882.1375\",\"8\":\"883.3042\",\"9\":\"896.3542\",\"10\":\"NA\",\"11\":\"NA\",\"12\":\"NA\",\"13\":\"<cpl [4]>\",\"14\":\"<cpl [6]>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Holiday\",\"4\":\"ets\",\"5\":\"1.100600e-02\",\"6\":\"-486.8653\",\"7\":\"991.7305\",\"8\":\"994.3020\",\"9\":\"1013.1688\",\"10\":\"2547.7000\",\"11\":\"2573.8279\",\"12\":\"0.07443346\",\"13\":\"<NULL>\",\"14\":\"<NULL>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Holiday\",\"4\":\"arima\",\"5\":\"3.068849e+03\",\"6\":\"-429.2382\",\"7\":\"864.4763\",\"8\":\"864.7963\",\"9\":\"871.5847\",\"10\":\"NA\",\"11\":\"NA\",\"12\":\"NA\",\"13\":\"<cpl [0]>\",\"14\":\"<cpl [1]>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Other\",\"4\":\"ets\",\"5\":\"4.967764e+02\",\"6\":\"-421.5549\",\"7\":\"853.1099\",\"8\":\"853.9207\",\"9\":\"865.0200\",\"10\":\"471.9375\",\"11\":\"511.9163\",\"12\":\"17.04202574\",\"13\":\"<NULL>\",\"14\":\"<NULL>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Other\",\"4\":\"arima\",\"5\":\"4.889575e+02\",\"6\":\"-356.0907\",\"7\":\"718.1813\",\"8\":\"718.5013\",\"9\":\"725.2897\",\"10\":\"NA\",\"11\":\"NA\",\"12\":\"NA\",\"13\":\"<cpl [0]>\",\"14\":\"<cpl [1]>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Visiting\",\"4\":\"ets\",\"5\":\"1.089051e-02\",\"6\":\"-502.9317\",\"7\":\"1023.8634\",\"8\":\"1026.4348\",\"9\":\"1045.3016\",\"10\":\"3714.0018\",\"11\":\"3860.2038\",\"12\":\"0.08428978\",\"13\":\"<NULL>\",\"14\":\"<NULL>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Visiting\",\"4\":\"arima\",\"5\":\"4.241162e+03\",\"6\":\"-441.5481\",\"7\":\"893.0963\",\"8\":\"893.9182\",\"9\":\"904.9435\",\"10\":\"NA\",\"11\":\"NA\",\"12\":\"NA\",\"13\":\"<cpl [4]>\",\"14\":\"<cpl [9]>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në§Œì•½ í•˜ë‚˜ì˜ ëª¨í˜•ìœ¼ë¡œë§Œ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸ë§ì„ ìˆ˜í–‰í•˜ê³  ìˆë‹¤ë©´, `report()` í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ì´ëŠ” í•˜ë‚˜ì˜ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨í˜•ì˜ í‰ê°€ë¥¼ ìƒë‹¹íˆ ë§Œì¡±ìŠ¤ëŸ¬ìš´ í¬ë§·ìœ¼ë¡œ ì œê³µí•´ì¤ë‹ˆë‹¤.ğŸ˜Š ì—¬í–‰ ëª©ì ì´ \"Holiday\"ì¼ ë•Œ ETS ëª¨í˜•ì„ ì í•©í•œ ê²°ê³¼ ëŒ€í•œ ìš”ì•½ì„ `report()`ë¥¼ í†µí•´ ì§„í–‰í•´ë´¤ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit %>%\n    filter(Purpose == \"Holiday\") %>%\n    select(ets) %>%\n    report()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nSeries: Trips \nModel: ETS(M,A,A) \n  Smoothing parameters:\n    alpha = 0.03084501 \n    beta  = 0.03084499 \n    gamma = 0.0001000967 \n\n  Initial states:\n     l[0]      b[0]     s[0]    s[-1]     s[-2]    s[-3]\n 424.0777 -2.535481 -26.7441 4.256618 -10.10668 32.59417\n\n  sigma^2:  0.011\n\n      AIC      AICc       BIC \n 991.7305  994.3020 1013.1688 \n```\n:::\n:::\n\n\nì•„ìš¸ëŸ¬, ëª¨í˜•ìœ¼ë¡œë¶€í„°ì˜ ì í•©ê°’ê³¼ ì”ì°¨ëŠ” `fitted()`, `residuals()` ê°ê°ì„ ì´ìš©í•´ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit %>%\n    fitted()\nfit %>%\n    residuals()\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Quarter\"],\"name\":[5],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\".fitted\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q1\",\"6\":\"395.7035\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q2\",\"6\":\"482.7697\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q3\",\"6\":\"487.1224\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q4\",\"6\":\"454.4149\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q1\",\"6\":\"391.1064\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q2\",\"6\":\"465.8753\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q3\",\"6\":\"491.6959\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q4\",\"6\":\"424.2785\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2000 Q1\",\"6\":\"364.0546\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2000 Q2\",\"6\":\"476.9459\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Quarter\"],\"name\":[5],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\".resid\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q1\",\"6\":\"9.539479\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q2\",\"6\":\"-75.134444\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q3\",\"6\":\"-1.133207\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q4\",\"6\":\"-25.215441\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q1\",\"6\":\"-30.273756\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q2\",\"6\":\"19.875959\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q3\",\"6\":\"-133.012530\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q4\",\"6\":\"1.491767\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2000 Q1\",\"6\":\"130.451762\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2000 Q2\",\"6\":\"22.038062\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nì í•©ê°’ê³¼ ì”ì°¨ë¥¼ í•¨ê»˜ ì–»ê³  ì‹¶ë‹¤ë©´ `augment()`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit %>% \n    augment()\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Quarter\"],\"name\":[5],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"Trips\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\".fitted\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\".resid\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\".innov\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q1\",\"6\":\"405.2430\",\"7\":\"395.7035\",\"8\":\"9.539479\",\"9\":\"9.539479\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q2\",\"6\":\"407.6352\",\"7\":\"482.7697\",\"8\":\"-75.134444\",\"9\":\"-75.134444\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q3\",\"6\":\"485.9892\",\"7\":\"487.1224\",\"8\":\"-1.133207\",\"9\":\"-1.133207\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1998 Q4\",\"6\":\"429.1995\",\"7\":\"454.4149\",\"8\":\"-25.215441\",\"9\":\"-25.215441\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q1\",\"6\":\"360.8326\",\"7\":\"391.1064\",\"8\":\"-30.273756\",\"9\":\"-30.273756\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q2\",\"6\":\"485.7513\",\"7\":\"465.8753\",\"8\":\"19.875959\",\"9\":\"19.875959\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q3\",\"6\":\"358.6833\",\"7\":\"491.6959\",\"8\":\"-133.012530\",\"9\":\"-133.012530\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"1999 Q4\",\"6\":\"425.7702\",\"7\":\"424.2785\",\"8\":\"1.491767\",\"9\":\"1.491767\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2000 Q1\",\"6\":\"494.5063\",\"7\":\"364.0546\",\"8\":\"130.451762\",\"9\":\"130.451762\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2000 Q2\",\"6\":\"498.9839\",\"7\":\"476.9459\",\"8\":\"22.038062\",\"9\":\"22.038062\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nëª¨í˜•ê°„ ì˜ˆì¸¡ ì •í™•ë„ì˜ ë¹„êµëŠ” `accuracy()`ë¥¼ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ì—¬ëŸ¬ ì˜ˆì¸¡ í‰ê°€ ì¸¡ë„ë¥¼ ì œê³µí•´ì¤ë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit %>% \n    accuracy() %>% \n    arrange(MASE)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".type\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"ME\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RMSE\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MAE\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MPE\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MAPE\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"MASE\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"RMSSE\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ACF1\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Holiday\",\"4\":\"ets\",\"5\":\"Training\",\"6\":\"4.6685812\",\"7\":\"50.47475\",\"8\":\"37.21943\",\"9\":\"0.2171840\",\"10\":\"7.286626\",\"11\":\"0.6752829\",\"12\":\"0.6972556\",\"13\":\"0.006245583\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"Training\",\"6\":\"3.3061791\",\"7\":\"56.38938\",\"8\":\"42.85577\",\"9\":\"-0.7534998\",\"10\":\"9.314320\",\"11\":\"0.6910741\",\"12\":\"0.7402536\",\"13\":\"0.152561519\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"arima\",\"5\":\"Training\",\"6\":\"2.5298686\",\"7\":\"58.24867\",\"8\":\"45.95808\",\"9\":\"-1.1704366\",\"10\":\"10.123450\",\"11\":\"0.7411008\",\"12\":\"0.7646615\",\"13\":\"-0.041537973\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Holiday\",\"4\":\"arima\",\"5\":\"Training\",\"6\":\"-4.6389201\",\"7\":\"54.34857\",\"8\":\"41.43945\",\"9\":\"-2.4387791\",\"10\":\"8.456079\",\"11\":\"0.7518479\",\"12\":\"0.7507684\",\"13\":\"-0.112851983\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Other\",\"4\":\"arima\",\"5\":\"Training\",\"6\":\"-0.3435639\",\"7\":\"21.69381\",\"8\":\"16.97031\",\"9\":\"-6.1610021\",\"10\":\"19.494106\",\"11\":\"0.7633891\",\"12\":\"0.7720351\",\"13\":\"0.080830958\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Other\",\"4\":\"ets\",\"5\":\"Training\",\"6\":\"-0.1415391\",\"7\":\"21.72412\",\"8\":\"17.04203\",\"9\":\"-5.9743933\",\"10\":\"19.579269\",\"11\":\"0.7666153\",\"12\":\"0.7731138\",\"13\":\"0.082340436\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Visiting\",\"4\":\"ets\",\"5\":\"Training\",\"6\":\"8.1656867\",\"7\":\"60.94261\",\"8\":\"51.39776\",\"9\":\"0.4326661\",\"10\":\"8.281368\",\"11\":\"0.8194654\",\"12\":\"0.7816176\",\"13\":\"-0.058701318\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Visiting\",\"4\":\"arima\",\"5\":\"Training\",\"6\":\"6.8854402\",\"7\":\"63.05624\",\"8\":\"51.71665\",\"9\":\"0.1060524\",\"10\":\"8.436977\",\"11\":\"0.8245497\",\"12\":\"0.8087259\",\"13\":\"-0.101529827\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nì°¸ê³ ë¡œ, ì—¬ê¸°ì„œëŠ” í›ˆë ¨ ìë£Œ(training data)ì— ëŒ€í•œ ì˜ˆì¸¡ ì„±ëŠ¥ì— í•´ë‹¹í•©ë‹ˆë‹¤. ë³¸ í˜¸ì£¼ ì¼ë³„ ì—¬í–‰ê°ìˆ˜ì— ëŒ€í•œ ìë£Œì—ì„œëŠ” ì˜ˆì¸¡ ì„±ëŠ¥ í‰ê°€ ì¸¡ë„ë¥¼ MASEë¡œ í•  ê²½ìš°, ETS ëª¨í˜•ì´ ì—¬í–‰ ëª©ì ì´ \"Other\"ì¸ ê²½ìš°ë¥¼ ì œì™¸í•˜ê³ ëŠ” í›¨ì”¬ ë” ì¢‹ì€ ì„±ëŠ¥ì„ ë³´ì´ê³  ìˆìŠµë‹ˆë‹¤. í–¥í›„ ì‹œì ì˜ ì˜ˆì¸¡ì€ `forecast()`ë¡œ ì¶”ê°€ì ì¸ ìë£Œì— ëŒ€í•œ ì •ë³´ ì—†ì´ ë°”ë¡œ ìˆ˜í–‰ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfc <- fit %>% \n    forecast(h = \"5 years\")\nfc\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Quarter\"],\"name\":[5],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"Trips\"],\"name\":[6],\"type\":[\"dist\"],\"align\":[\"right\"]},{\"label\":[\".mean\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q1\",\"6\":\"<dist>\",\"7\":\"618.5614\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q2\",\"6\":\"<dist>\",\"7\":\"709.0934\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q3\",\"6\":\"<dist>\",\"7\":\"738.4658\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q4\",\"6\":\"<dist>\",\"7\":\"713.4445\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q1\",\"6\":\"<dist>\",\"7\":\"664.0338\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q2\",\"6\":\"<dist>\",\"7\":\"754.5658\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q3\",\"6\":\"<dist>\",\"7\":\"783.9382\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q4\",\"6\":\"<dist>\",\"7\":\"758.9169\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2020 Q1\",\"6\":\"<dist>\",\"7\":\"709.5062\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2020 Q2\",\"6\":\"<dist>\",\"7\":\"800.0383\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\ní–¥í›„ ì‹œì ì˜ ì˜ˆì¸¡ ê²°ê³¼ëŠ” fable(forecast table)ë¡œ ìš”ì•½ë˜ë©°, fableì€ ì˜ˆì¸¡ê°’ì˜ ì  ì¶”ì •ì¹˜ì™€ ì˜ˆì¸¡ê°’ì˜ ë¶„í¬ì— ëŒ€í•œ ì •ë³´ê¹Œì§€ í¬í•¨í•˜ì—¬ ì œê³µí•´ì¤ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì²« ë²ˆì§¸ í–‰ì˜ ì‹œê³„ì—´ì˜ ì˜ˆì¸¡ê°’ì˜ ë¶„í¬ëŠ” í‰ê· ì´ 619, ë¶„ì‚°ì´ 3533ì¸ ì •ê·œë¶„í¬ì— í•´ë‹¹í•©ë‹ˆë‹¤. ì •ê·œë¶„í¬ë¥¼ ë”°ë¥´ëŠ” ì´ìœ ëŠ”, ì•ì„œ ETSì˜ ê°„ëµí•œ ì†Œê°œì—ì„œ ì„¤ëª…í–ˆë“¯ì´ ì˜¤ì°¨í•­ì— ëŒ€í•´ ê°€ìš°ìŠ¤ ë°±ìƒ‰ì¡ìŒ ê³¼ì •ì„ ê°€ì •í–ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŸ¬í•œ ì˜ˆì¸¡ê°’ì˜ ë¶„í¬ì— ë”°ë¥¸ êµ¬ê°„ ì¶”ì •ì€ ì–´ë–¤ í•¨ìˆ˜ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆì„ê¹Œìš”? ì˜ˆì¸¡ê°’ì˜ ì‹ ë¢°êµ¬ê°„ì€ `hilo()`ë¥¼ ì´ìš©í•˜ë©´ ë©ë‹ˆë‹¤. `hilo()` í•¨ìˆ˜ëŠ” fable ê°ì²´ì™€ í•¨ê»˜ ë™ì‘í•˜ë©°, ì›í•˜ëŠ” ì‹ ë¢°ìˆ˜ì¤€ì„ ë°˜ì˜í•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤. ë‹¤ìŒì€ 80%, 95% ê°ê°ì˜ ì‹ ë¢°ìˆ˜ì¤€ì— ëŒ€í•œ êµ¬ê°„ì„ ì¶”ì •í•œ ê²ƒì…ë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfc %>%\n    hilo(level = c(80, 95))\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"Region\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"State\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Purpose\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Quarter\"],\"name\":[5],\"type\":[\"qtr\"],\"align\":[\"right\"]},{\"label\":[\"Trips\"],\"name\":[6],\"type\":[\"dist\"],\"align\":[\"right\"]},{\"label\":[\".mean\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"80%\"],\"name\":[8],\"type\":[\"hilo\"],\"align\":[\"right\"]},{\"label\":[\"95%\"],\"name\":[9],\"type\":[\"hilo\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q1\",\"6\":\"<dist>\",\"7\":\"618.5614\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q2\",\"6\":\"<dist>\",\"7\":\"709.0934\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q3\",\"6\":\"<dist>\",\"7\":\"738.4658\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2018 Q4\",\"6\":\"<dist>\",\"7\":\"713.4445\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q1\",\"6\":\"<dist>\",\"7\":\"664.0338\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q2\",\"6\":\"<dist>\",\"7\":\"754.5658\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q3\",\"6\":\"<dist>\",\"7\":\"783.9382\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2019 Q4\",\"6\":\"<dist>\",\"7\":\"758.9169\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2020 Q1\",\"6\":\"<dist>\",\"7\":\"709.5062\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"},{\"1\":\"Melbourne\",\"2\":\"Victoria\",\"3\":\"Business\",\"4\":\"ets\",\"5\":\"2020 Q2\",\"6\":\"<dist>\",\"7\":\"800.0383\",\"8\":\"<hilo>\",\"9\":\"<hilo>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\në§ˆì§€ë§‰ìœ¼ë¡œ, ì˜ˆì¸¡ê°’ì— ëŒ€í•œ ì‹œê°í™”ëŠ” fable ê°ì²´ì— ëŒ€í•´ `autoplot()`ì„ ì ìš©í•´ì£¼ë©´ ë©ë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nfc %>% \n  autoplot(tourism_melb)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/forecast-1.png){fig-align='center' width=672}\n:::\n:::\n\n\në³¸ íŠœí† ë¦¬ì–¼ì—ì„œ ì†Œê°œí•œ í•¨ìˆ˜ë“¤ ì™¸ì—ë„ {fable}ì˜ íŠ¹ì • ëª¨í˜• ê°ì²´ë“¤ê³¼ í•¨ê»˜ ë™ì‘í•˜ëŠ” ì—¬ëŸ¬ í•¨ìˆ˜ë“¤ì´ ìˆìŠµë‹ˆë‹¤(e.g. `refit()`, `interpolate()`, `components()`, etc). íŠœí† ë¦¬ì–¼ì—ì„œ ì†Œê°œí•œ ë‚´ìš©ì™¸ì— ìì„¸í•œ ë‚´ìš©ì´ ê¶ê¸ˆí•˜ì‹œë‹¤ë©´ [Forecasting: Principles and Practices (3rd Ed.)](https://otexts.com/fpp3/toolbox.html)ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\n\n## 5 fable.prophet\n\n{fable.prophet}ì€ facebookì—ì„œ ì œì•ˆí•œ ë‹¨ì¼ ì‹œê³„ì—´ ì˜ˆì¸¡ëª¨í˜•ì— ëŒ€í•œ ì í•© ë˜í•œ tidyí•œ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•´ì¤ë‹ˆë‹¤. prophetì€ ì‹œê³„ì—´ì˜ ì‹œê°„ ì¢…ì†ì ì¸ íŠ¹ì„±ì„ ê³ ë ¤í•˜ëŠ” ê¸°ì¡´ì˜ ì‹œê³„ì—´ ëª¨í˜•(e.g. ì§€ìˆ˜í‰í™œë²•, ARIMA ëª¨í˜•)ê³¼ ë‹¬ë¦¬ curve-fitting(e.g. [splines](https://be-favorite.tistory.com/56?category=923110))ìœ¼ë¡œ ëª¨í˜•ì„ ì í•©í•˜ë©°, ì‹œê³„ì—´ì„ ë‹¤ìŒê³¼ ê°™ì´ ì„¸ ê°€ì§€ ìš”ì†Œë¡œ ë¶„í•´í•˜ê³  ê° ìš”ì†Œë¥¼ ì‹œê°„ì˜ í•¨ìˆ˜ë¡œ ê°€ë²•ì ìœ¼ë¡œ ëª¨í˜•í™”í•©ë‹ˆë‹¤.\n\n\n$$\ny(t) = g(t) + s(t) + h(t) + \\epsilon_t\n$$\n\n\nì—¬ê¸°ì„œ $g(t)$ëŠ” ë¹„ì£¼ê¸°ì  ë³€í™”ë¥¼ ëª¨í˜•í™”í•˜ëŠ” ì¶”ì„¸ í•¨ìˆ˜, $s(t)$ëŠ” ì£¼ë³„ ë˜ëŠ” ì—°ë³„ ê³„ì ˆì„±ê³¼ ê°™ì€ ì£¼ê¸°ì  ë³€í™”ë¥¼ ë°˜ì˜í•˜ë©°, $h(t)$ëŠ” ë¶ˆê·œì¹™í•˜ê²Œ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìˆëŠ” íœ´ì¼íš¨ê³¼(holidays and events effects)ë¥¼ ëª¨í˜•í™”í•©ë‹ˆë‹¤. ì„¸ ìš”ì†Œ ì¤‘ì—ì„œë„ íœ´ì¼íš¨ê³¼ì— ëŒ€í•œ ë°˜ì˜ì´ prophetì˜ ìƒë‹¹íˆ íŠ¹ì§•ì ì¸ ë¶€ë¶„ì´ë¼ í•  ìˆ˜ ìˆê² ìœ¼ë©°, ëª¨í˜•ì—ì„œ ì¡°ì ˆí•  ìˆ˜ ìˆëŠ” ëª¨ìˆ˜ë“¤ì´ ìƒë‹¹íˆ ë§ì•„ì„œ ì•„ì£¼ ìœ ì—°í•˜ê³  ë””í…Œì¼í•˜ê²Œ ëª¨ë¸ë§ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë„ë©”ì¸ ì§€ì‹ì´ í’ë¶€í• ìˆ˜ë¡ prophetì„ í†µí•œ ì„±ëŠ¥ ê°œì„ ì˜ ê°€ëŠ¥ì„±ì€ ë¬´ê¶ë¬´ì§„í•©ë‹ˆë‹¤. ë³¸ íŠœí† ë¦¬ì–¼ì—ì„œ prophetì— ëŒ€í•œ ê°œë… ì„¤ëª…ì€ ì´ì¯¤ì—ì„œ ê°„ëµí•˜ê²Œ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤. prophetì„ ì´ë²ˆì— ì²˜ìŒ ì ‘í•˜ì‹œëŠ” ë¶„ë“¤ì€ [ì—¬ê¸°](https://github.com/be-favorite/Tutorial_prophet)ë¥¼ ì°¸ê³ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ê°œë… ì •ë¦¬ì™€ Rì„ ì´ìš©í•œ íŠœí† ë¦¬ì–¼ ê³¼ì •ì„ ì •ë¦¬í•´ë†“ì•˜ëŠ”ë°, ì—¬ê¸°ì„œ ì†Œê°œí•  tidyí•œ ì¸í„°í˜ì´ìŠ¤ì˜ ì´í•´ë¥¼ ìœ„í•´ì„œ ê¼­ í•„ìš”ë¡œ ë ê²ë‹ˆë‹¤.\n\në³¸ íŠœí† ë¦¬ì–¼ì—ì„œ prophetì„ ì´ìš©í•œ ì˜ˆì¸¡ ëª¨ë¸ë§ì— ì´ìš©í•  ìë£ŒëŠ” í˜¸ì£¼ì˜ ì¹´í˜, ë ˆìŠ¤í† ë‘ ë° ì¼€ì´í„°ë§ ì„œë¹„ìŠ¤ì— ê´€í•œ ì›” ë§¤ì¶œì•¡ ìë£Œ(ë‹¨ìœ„: milions \\$AUD)ì…ë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncafe <- tsibbledata::aus_retail %>%\n    filter(Industry == \"Cafes, restaurants and catering services\")\nautoplot(cafe)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nPlot variable not specified, automatically selected `.vars = Turnover`\n```\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/cafe-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nì£¼ë³„ë¡œ ë‚˜ë‰œ í•´ë‹¹ ìë£Œì˜ ê° ê³„ì—´ì€ ì¦ê°€í•˜ëŠ” ì¶”ì„¸ì™€ ê·¸ì— ë”°ë¥¸ ì—°ë³„ ê³„ì ˆ íŒ¨í„´ì´ ëˆˆì— ë³´ì…ë‹ˆë‹¤. ë˜í•œ, ê³„ì ˆ íŒ¨í„´ì˜ ê²½ìš° ê³„ì—´ì˜ ìˆ˜ì¤€(level)ì— ë¹„ë¡€í•˜ëŠ” í˜•íƒœë¥¼ ë³´ì´ê³  ìˆìœ¼ë¯€ë¡œ, ê³„ì ˆì„±ì„ ìŠ¹ë²•ì ìœ¼ë¡œ ê³ ë ¤í•´ì•¼í•  ê²ƒì…ë‹ˆë‹¤. ì•„ìš¸ëŸ¬, ì›”ë³„ ìë£Œì˜ ê²½ìš°ëŠ” íœ´ì¼ íš¨ê³¼ì˜ ê²½ìš° ê³„ì ˆ ìš”ì†Œë¥¼ í†µí•´ ëª¨í˜•í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. íœ´ì¼íš¨ê³¼ì— ëŒ€í•œ ë°˜ì˜ì€ ì´ë²ˆì— ì§„í–‰í•˜ì§€ ì•Šì„ ì˜ˆì •ì…ë‹ˆë‹¤(ê¸°ì¡´ì˜ prophet ì¸í„°í˜ì´ìŠ¤ì—ì„œ ìˆ˜í–‰í–ˆë˜ ê²ƒê³¼ ê°™ì´ ê°„ë‹¨í•˜ê²Œ ë°˜ì˜, see [here](https://github.com/mitchelloharawild/fable.prophet/issues/17) for details). ë³¸ ìë£Œì— ëŒ€í•´ ì¶”ì„¸ ìš”ì†ŒëŠ” ì„ í˜•ìœ¼ë¡œ í•˜ì—¬(default), ì—°ë³„ ê³„ì ˆì„±ì„ ìŠ¹ë²•ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬ prophetì„ ì í•©í•´ë³´ì•˜ìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit <- cafe %>%\n  model(\n    prophet = prophet(Turnover ~ season(\"year\", 4, type = \"multiplicative\"))\n  )\nfit\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Industry\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"prophet\"],\"name\":[3],\"type\":[\"lst_mdl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"},{\"1\":\"New South Wales\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"},{\"1\":\"Northern Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"},{\"1\":\"Queensland\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"},{\"1\":\"South Australia\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"},{\"1\":\"Tasmania\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"},{\"1\":\"Victoria\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"},{\"1\":\"Western Australia\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"<lst_mdl>\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\nê° ê³„ì—´ì— ëŒ€í•´ prophetì´ ì˜ ì í•©ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì í•©ëœ ëª¨í˜•ì˜ ê° ìš”ì†Œë“¤ì€ `components()`ë¡œ ì¶”ì¶œí• ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncomponents(fit)\n```\n:::\n\n::: {.cell max.print='10'}\n::: {.cell-output-display}\n`````{=html}\n<div data-pagedtable=\"false\">\n  <script data-pagedtable-source type=\"application/json\">\n{\"columns\":[{\"label\":[\"State\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Industry\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\".model\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"Month\"],\"name\":[4],\"type\":[\"mth\"],\"align\":[\"right\"]},{\"label\":[\"Turnover\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"additive_terms\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"multiplicative_terms\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"trend\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"year\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\".resid\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Apr\",\"5\":\"4.4\",\"6\":\"0\",\"7\":\"0.014816749\",\"8\":\"4.554849\",\"9\":\"0.014816749\",\"10\":\"-0.2223369\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 May\",\"5\":\"3.4\",\"6\":\"0\",\"7\":\"-0.013208131\",\"8\":\"4.614014\",\"9\":\"-0.013208131\",\"10\":\"-1.1530718\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Jun\",\"5\":\"3.6\",\"6\":\"0\",\"7\":\"0.010381269\",\"8\":\"4.675152\",\"9\":\"0.010381269\",\"10\":\"-1.1236859\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Jul\",\"5\":\"4.0\",\"6\":\"0\",\"7\":\"-0.013184764\",\"8\":\"4.734317\",\"9\":\"-0.013184764\",\"10\":\"-0.6718964\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Aug\",\"5\":\"3.6\",\"6\":\"0\",\"7\":\"0.009921116\",\"8\":\"4.795455\",\"9\":\"0.009921116\",\"10\":\"-1.2430311\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Sep\",\"5\":\"4.2\",\"6\":\"0\",\"7\":\"0.028663448\",\"8\":\"4.856592\",\"9\":\"0.028663448\",\"10\":\"-0.7957990\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Oct\",\"5\":\"4.8\",\"6\":\"0\",\"7\":\"0.001200633\",\"8\":\"4.915758\",\"9\":\"0.001200633\",\"10\":\"-0.1216598\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Nov\",\"5\":\"5.4\",\"6\":\"0\",\"7\":\"0.048288332\",\"8\":\"4.976895\",\"9\":\"0.048288332\",\"10\":\"0.1827787\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1982 Dec\",\"5\":\"6.9\",\"6\":\"0\",\"7\":\"0.024145094\",\"8\":\"5.036061\",\"9\":\"0.024145094\",\"10\":\"1.7423431\"},{\"1\":\"Australian Capital Territory\",\"2\":\"Cafes, restaurants and catering services\",\"3\":\"prophet\",\"4\":\"1983 Jan\",\"5\":\"3.8\",\"6\":\"0\",\"7\":\"-0.106559303\",\"8\":\"5.097198\",\"9\":\"-0.106559303\",\"10\":\"-0.7540444\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  </script>\n</div>\n`````\n:::\n:::\n\n\n`components()`ë¥¼ í†µí•´ ì£¼ì–´ì§€ëŠ” ê°ì²´ ìì²´ì— `autoplot()`ì„ ìˆ˜í–‰í•˜ë©´ ëª¨ë“  ìš”ì†Œì— ëŒ€í•œ ì‹œê°í™”ê°€ í•œêº¼ë²ˆì— ê°€ëŠ¥í•˜ì§€ë§Œ, ì¶”ì„¸ì™€ ì›”ë³„ ê³„ì ˆ íŒ¨í„´ì— ëŒ€í•´ì„œë§Œ ì‹œê°í™”í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncomponents(fit) %>%\n  ggplot(aes(x = Month, y = trend, colour = State)) + \n  geom_line()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/cafe_trend-1.png){fig-align='center' width=80%}\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ncomponents(fit) %>%\n  ggplot(aes(x = month(Month), y = year, \n             colour = State, group = interaction(year(Month), State))) + \n  geom_line() + \n  scale_x_continuous(breaks = 1:12, labels = month.abb) + \n  xlab(\"Month\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/cafe_seasonal-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\nì—°ë³„ ê³„ì ˆíŒ¨í„´ì˜ ê²½ìš° ì£¼ë³„ë¡œ ëŒ€ê°œ ë¹„ìŠ·í•˜ë‚˜, ë¶ë°© ì§€ì—­(the Northern Territory)ì˜ ê²½ìš° ë‹¤ë¥¸ ì£¼ë“¤ê³¼ëŠ” í¬ê²Œ ë‹¤ë¥¸ ê³„ì©” íŒ¨í„´ì„ ë³´ì—¬ì£¼ê³  ìˆìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, prophetì˜ ì˜ˆì¸¡ë„ `forecast()`ë¥¼ ì´ìš©í•´ ì‰½ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í–¥í›„ 2ë…„ì— ëŒ€í•´ ì˜ˆì¸¡í•´ë³´ì•˜ìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\" hash='index_cache/html/forecast_prophet_d23fe18ea969b6f1075c6ebbb64322d2'}\n\n```{.r .cell-code}\nfc <- fit %>% \n  forecast(h = 24)\ncafe %>% \n  ggplot(aes(x = Month, y = Turnover, colour = State)) + \n  geom_line() + \n  autolayer(fc)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/forecast_prophet-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n[Forecasting: Principles and Practices (3rd Ed.)](https://otexts.com/fpp3/)ì—ì„œëŠ” prophetì™¸ì—ë„, ë²¡í„° ìê¸°íšŒê·€ëª¨í˜•, ì¸ê³µì‹ ê²½ë§ ê¸°ë°˜ì˜ ì‹œê³„ì—´ ì˜ˆì¸¡ëª¨í˜•, ë¶“ìŠ¤íŠ¸ë© ë° ë°°ê¹… ê¸°ë²•ì„ í™œìš©í•œ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨í˜• ë“±ì˜ ê³ ê¸‰ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨í˜•ë„ ì œê³µí•´ì¤ë‹ˆë‹¤. ê´€ì‹¬ìˆìœ¼ì‹  ë¶„ë“¤ì€ fpp3ì„ ì°¸ê³ í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.\n\n## ë§ºìŒë§\n\ntidyverts ecosystemì´ ì „ë°˜ì ìœ¼ë¡œ ì‘ë™í•˜ëŠ” ê³¼ì •ì„ ì†Œê°œí•´ ë³´ì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜, ì‹œê³„ì—´ ìë£Œì˜ ì˜ˆì¸¡ ëª¨ë¸ë§ ëŒ€í•œ ì´í•´ì™€ ë”ë¶ˆì–´ tidyvertsë¥¼ ì¢€ ë” ë””í…Œì¼í•˜ê²Œ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ”, [Forecasting: Principles and Practices (3rd Ed.)](https://otexts.com/fpp3/)ì„ ì°¸ê³ í•˜ì‹œëŠ”ê²Œ ì¢‹ì„ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤. tidyverseì™€ [tidymodels](https://github.com/be-favorite/Tutorial_tidymodels)ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ì „ì²˜ë¦¬, ì˜ˆì¸¡ëª¨í˜• ê°œë°œ, ê°œì„  ë“±ì˜ ê³¼ì •ì— ê±¸ë¦¬ëŠ” ì‹œê°„ì„ í¬ê²Œ ë‹¨ì¶•ì‹œì¼°ë“¯ì´, fpp3ì„ ì˜ ìµí˜€ë‘ë©´ ì‹œê³„ì—´ ì˜ˆì¸¡ ëª¨ë¸ë§ì— ì „ë°˜ì ì¸ ê³¼ì •ì— ë“œëŠ” ì‹œê°„ì„ ìƒë‹¹íˆ ë‹¨ì¶•ì‹œí‚¬ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.ğŸ˜Š\n\n::: {.callout-tip collapse=\"true\"}\n## ì„¸ì…˜ì •ë³´ë¥¼ ë³´ë ¤ë©´ ëˆ„ë¥´ì„¸ìš”\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```\nâ”€ Session info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n setting  value\n version  R version 4.2.1 (2022-06-23)\n os       macOS Monterey 12.6\n system   aarch64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       Asia/Seoul\n date     2022-09-19\n pandoc   2.18 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/tools/ (via rmarkdown)\n quarto   1.0.38 @ /usr/local/bin/quarto\n\nâ”€ Packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n package       * version date (UTC) lib source\n dplyr         * 1.0.9   2022-04-28 [1] CRAN (R 4.2.0)\n fable         * 0.3.1   2021-05-16 [1] CRAN (R 4.2.0)\n fable.prophet * 0.1.0   2020-08-20 [1] CRAN (R 4.2.0)\n fabletools    * 0.3.2   2021-11-29 [1] CRAN (R 4.2.0)\n feasts        * 0.2.2   2021-06-03 [1] CRAN (R 4.2.0)\n fpp3          * 0.4.0   2021-02-06 [1] CRAN (R 4.2.0)\n ggplot2       * 3.3.6   2022-05-03 [1] CRAN (R 4.2.0)\n lubridate     * 1.8.0   2021-10-07 [1] CRAN (R 4.2.0)\n nycflights13  * 1.0.2   2021-04-12 [1] CRAN (R 4.2.0)\n purrr         * 0.3.4   2020-04-17 [1] CRAN (R 4.2.0)\n Rcpp          * 1.0.9   2022-07-08 [1] CRAN (R 4.2.0)\n rmarkdown     * 2.14    2022-04-25 [1] CRAN (R 4.2.0)\n sessioninfo   * 1.2.2   2021-12-06 [1] CRAN (R 4.2.0)\n tibble        * 3.1.8   2022-07-22 [1] CRAN (R 4.2.0)\n tidyr         * 1.2.0   2022-02-01 [1] CRAN (R 4.2.0)\n tsibble       * 1.1.1   2021-12-03 [1] CRAN (R 4.2.0)\n tsibbledata   * 0.4.0   2022-01-07 [1] CRAN (R 4.2.0)\n\n [1] /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n```\n:::\n:::\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}