{
  "hash": "0be30d8d9b87a424dfb8883977590b12",
  "result": {
    "markdown": "---\ntitle: \"ggplot2 ì»¬ëŸ¬ë§ ê°€ì´ë“œ\"\ndescription: |\n  ë” ì ì€ ìˆ˜ì˜ ì»¬ëŸ¬ë¡œ ì§ê´€ì ì¸ ì‹œê°í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•\ndate: \"2022-08-14\"\ndraft: FALSE\npreview: preview.jpg\ncitation:\n  url: https://www.taemobang.com/posts/2022-08-07-coloring-guide-for-ggplot2/\ncategories: [Visualization, R]\nbibliography: references.bib\n---\n\n\n\n\n[![Photo by David Pisnoy on Unsplash](preview.jpg){width=\"800\"}](https://unsplash.com/photos/46juD4zY1XA?utm_source=unsplash&utm_medium=referral&utm_content=creditShareLink)\n\nì˜¤ëŠ˜ì€ `ggplot2`ì—ì„œ ë” ì ì€ ìˆ˜ì˜ ì»¬ëŸ¬ë¡œ ë” ì§ê´€ì ì¸ ì‹œê°í™”ë¥¼ ê°€ëŠ¥í•˜ê²Œë” í•´ì£¼ëŠ” 4ê°€ì§€ ë°©ì‹ì— ëŒ€í•´ ì†Œê°œí•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. `ggplot2`ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì§„í–‰ë˜ëŠ” ì˜ˆì œì´ê¸´ í•˜ë‚˜, ë³¸ ê¸€ì—ì„œ ì†Œê°œí•  ë°©ì‹ë“¤ì— ë‹´ê²¨ìˆëŠ” ì•„ì´ë””ì–´ëŠ” ì–¸ì–´, ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë§‰ë¡ í•˜ê³  ì ìš©ì´ ê°€ëŠ¥í• ê±°ë¼ê³  ë´…ë‹ˆë‹¤.ë¬¼ë¡ , `ggplot2`ë§Œí¼ ì§§ê³  ê°€ë…ì„± ì¢‹ì€ ì½”ë“œë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í• ì§€ëŠ” ë¯¸ì§€ìˆ˜ì´ì§€ë§Œìš”.ğŸ˜ ë³¸ ê¸€ì—ì„œ `ggplot2`ì˜ ê·¸ë˜í”„ ë¬¸ë²• [^1]ì´ ê°–ëŠ” ê°•ë ¥í•œ í˜ì„ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ë‹ˆë‹¤.\n\n[^1]: ğŸ”—[ê·¸ë˜í”„ ë¬¸ë²•ì´ë€?](http://aispiration.com/viz/viz-ggplot2-practice.html)\n\n<aside>ë³¸ ê¸€ì€ [@rapp2022]ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.</aside>\n\nëŒ€ì¤‘ë“¤ì€ ë§ì´ ì•„ë‹Œ ê·¸ë¦¼ì„ ê¸°ì–µí•©ë‹ˆë‹¤. ê·¸ë˜ì„œ, ì˜ ë§Œë“¤ì–´ì§„ ë°ì´í„° ì‹œê°í™”ëŠ” ê°•ë ¥í•œ í˜ì„ ê°–ìŠµë‹ˆë‹¤. ì¢…ì¢… ë°ì´í„° ì‹œê°í™”ë¥¼ í•˜ì‹œë‹¤ê°€ ì§€ë‚˜ì¹˜ê²Œ ë§ì€ ìƒ‰ì„ ì‚¬ìš©í•˜ê²Œ ë˜ì–´ ì˜¤íˆë ¤ ì „ë‹¬ë ¥ì´ ë–¨ì–´ì§„ë‹¤ëŠ” ëŠë‚Œì„ ë°›ì€ ì ì´ ìˆì§€ ì•Šìœ¼ì‹ ê°€ìš”? ê·¸ë ‡ë‹¤ë©´ ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì‹¤ ìˆ˜ë„ ìˆê² ìŠµë‹ˆë‹¤.ğŸ˜€\n\n## ì¤€ë¹„í•˜ê¸°\n\në³¸ê²©ì ì¸ ì‹œì‘ ì „ ëª‡ ê°€ì§€ ì¤€ë¹„ë¥¼ í•˜ê³ ì í•©ë‹ˆë‹¤. `ggplot2`ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ í…Œë§ˆ ì¤‘ `theme_minimal()`ì„ ì‚¬ìš©í•  ì˜ˆì •ì´ê³ , í°íŠ¸, ê·¸ë¦¼ ì œëª©ê³¼ ìƒ‰ ë“±ì— ëª‡ ê°€ì§€ ì¡°ì •ì„ ì¤„ ì˜ˆì •ì…ë‹ˆë‹¤:\n\n-   `showtext` íŒ¨í‚¤ì§€ë¥¼ í†µí•´ [Fira Sans font](https://fonts.google.com/specimen/Fira+Sans) ì„¤ì •\n\n-   ê·¸ë¦¼ ì œëª©ì€ ê¸°ë³¸ ì¢Œì¸¡ ì •ë ¬, ìƒ‰ë§¹(color-blind)ê¹Œì§€ ê³ ë ¤í•œ [Okabe Ito](https://jfly.uni-koeln.de/color/) ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ ì‚¬ìš©\n\n    -   ë³¸ ê¸€ì˜ ì‘ì„±ì— ì°¸ê³ í•œ ì› ê¸€ì˜ ì €ìëŠ” [Fundamentals of Data Visualization by Claus Wilke](https://clauswilke.com/dataviz/)ë¥¼ ì½ì€ ë’¤, Okabe Ito ì»¬ëŸ¬ íŒ”ë ˆíŠ¸ë¥¼ ì„ í˜¸í•˜ê²Œ ë˜ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤.\n\n\n::: {.cell warnings='false'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(showtext)\nfont_add_google(\"Fira Sans\", \"firasans\")\nshowtext_auto()\n\ntheme_customs <- theme(\n  text = element_text(family = 'firasans', size = 16),\n  plot.title.position = 'plot',\n  plot.title = element_text(\n    face = 'bold', \n    colour = thematic::okabe_ito(8)[6],\n    margin = margin(t = 2, r = 0, b = 7, l = 0, unit = \"mm\")\n  )\n)\n\ntheme_set(theme_minimal() + theme_customs)\n```\n:::\n\n\n## ìŒì˜ì„ í™œìš©í•˜ì\n\n`ggplot2` íŒ¨í‚¤ì§€ì—ì„œ ì œê³µí•˜ëŠ” `mpg` ë°ì´í„°ì…‹ì„ ì´ìš©í•´ ì—°ë„ë³„ ìë™ì°¨ ì¢…ë¥˜ì˜ ë¹ˆë„ë¥¼ ì‹œê°í™”í•´ë´…ì‹œë‹¤. ì „ì— ì¶©ë¶„íˆ ë³´ì…¨ì„ë§Œí•œ ë°ì´í„°ë¼ ìƒê°í•´ì„œ, ë°ì´í„°ì…‹ì— ê´€í•œ ì„¤ëª…ì€ ìŠ¤í‚µí•˜ê² ìŠµë‹ˆë‹¤. ì´ëŸ° ë°©ì‹ìœ¼ë¡œ ì‹œê°í™”ë¥¼ í•´ë³´ì‹  ê²½í—˜ì´ ìˆìœ¼ì‹¤ê²ë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nmpg |> \n  ggplot(aes(x = factor(year), fill = class)) +\n  geom_bar() +\n  labs(x = \"year\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/mpg1-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nìë™ì°¨ ì¢…ë¥˜ê°€ ë§ë‹¤ë³´ë‹ˆ ë¬´ë ¤ 7ê°œì˜ ì»¬ëŸ¬ë¥¼ ì‹œê°í™”ì— ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ ê·¸ë¦¼ì´ í‹€ë ¸ë‹¤ê³  í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ì¢‹ì€ ì‹œê°í™”ë¼ê³  í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ í•œ ë²ˆ ìƒê°í•´ë³´ìëŠ” ê²ë‹ˆë‹¤. ì œê°€ ë³´ê¸°ì— ì´ë ‡ê²Œë‚˜ ë§ì€ ìˆ˜ì˜ ì»¬ëŸ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œê°í™”ëŠ” ê½¤ë‚˜ ì •ì‹ ì—†ì–´ ë³´ì¸ë‹¤ê³  ëŠê»´ì§‘ë‹ˆë‹¤.ì—¬ëŸ¬ ìˆ˜ì¤€ì„ ê°–ëŠ” ë²”ì£¼í˜• ë³€ìˆ˜ì— ê´€í•œ ì»¬ëŸ¬ë§ì— ìˆì–´ì„œ ë” ì ì€, ìµœëŒ€ 3ê°œ ì •ë„ì˜ ì»¬ëŸ¬ë§Œ ì‚¬ìš©í•˜ì—¬ ì‹œê°í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì€ ì—†ì„ê¹Œìš”? ì´ì œ ê·¸ ì•„ì´ë””ì–´ë¥¼ ì†Œê°œí•˜ê³ ì í•©ë‹ˆë‹¤. ìë™ì°¨ ì¢…ë¥˜ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ ìƒ‰ì¡°(hues) ë¿ë§Œì´ ì•„ë‹Œ, ìŒì˜(shades)ì„ í™œìš©í•˜ëŠ” ê²ƒì´ì£ . 3ê°€ì§€ ì»¬ëŸ¬ë§Œì„ ì‚¬ìš©í•´ íˆ¬ëª…ë„ë¥¼ ì¤Œìœ¼ë¡œì¨ 7ê°œì˜ ìë™ì°¨ ì¢…ë¥˜ë¥¼ êµ¬ë¶„í•´ë³´ê² ìŠµë‹ˆë‹¤. ë¯¸ë¦¬ ë§ì”€ë“œë¦¬ìë©´, `minivan`ì„ ë‹¨ë… í•˜ë‚˜ì˜ ê·¸ë£¹ìœ¼ë¡œ ì„¤ì •í•´ì£¼ì–´ ì´ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ íˆ¬ëª…ë„ê°€ ì¤„ì–´ë“¤ê³  ëŠ˜ì–´ë‚˜ê²Œë” ë§Œë“œëŠ” ê²ƒì´ í‚¤ ì•„ì´ë””ì–´ì…ë‹ˆë‹¤.\n\nì´ë¥¼ ìœ„í•´ì„œëŠ” ìš°ì„  ë°ì´í„°ì— ìë™ì°¨ì˜ ì¢…ë¥˜ë¥¼ 3ê°€ì§€ë¡œ êµ¬ë¶„ì§“ëŠ” ìƒˆë¡œìš´ ê·¸ë£¹ ë³€ìˆ˜ë¥¼ ìƒì„±í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤:\n\n\n::: {.cell fig.showtext='true'}\n\n```{.r .cell-code}\n# Group classes into three groups (to reduce colors to 3)\ndat <- mpg |> \n  mutate(\n    year = factor(year),\n    class_group = case_when(\n      class %in% c('2seater', 'compact', 'midsize') ~ \"grp1\",\n      class == 'minivan' ~ \"grp2\",\n      T ~ \"grp3\"\n    )\n  )\n```\n:::\n\n\nì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìš°ì„  ë¨¼ì € ì‹œê°í™”ë¥¼ í•´ë³´ì£ :\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nshades_plt <- dat |> \n  ggplot(aes(x = year, fill = class_group, alpha = class)) +\n  geom_bar() +\n  labs(\n    x = 'Year',\n    y = 'Counts',\n    alpha = 'Class',\n    title = 'Show shades, not hues'\n  )\nshades_plt\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/mpg2-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nìƒ‰ì¡°ì™€ ìŒì˜ê¹Œì§€ í™œìš©í•´ 3ê°€ì§€ ì»¬ëŸ¬ì •ë„ë¡œ ì¤„ì´ê¸´ í–ˆì§€ë§Œ, ì•„ì§ ì „ë‹¬ë ¥ì€ ë§¤ìš° ë–¨ì–´ì§‘ë‹ˆë‹¤. ìš°ë¦¬ ëˆˆìœ¼ë¡œ ìƒ‰ì¡°ì™€ ìŒì˜ì„ ì¡°í•©í•´ ê·¸ë¦¼ì˜ ìë™ì°¨ ì¢…ë¥˜ë¥¼ êµ¬ë¶„í•´ë‚´ëŠ” ê²ƒì€ ê½¤ ì–´ë µì£ . íˆ¬ëª…ë„ì™€ ìƒ‰ìƒì„ ì§ì ‘ ì¡°ì •í•´ë³´ê² ìŠµë‹ˆë‹¤. íˆ¬ëª…ë„ëŠ” `suv` -\\> `minivan`ê¹Œì§€ ì ì°¨ ì¤„ì–´ë“¤ê³ , `minvan` ì´í›„ë¶€í„°ëŠ” ë‹¤ì‹œ ì¤„ì–´ë“  ì–‘ë§Œí¼ íˆ¬ëª…ë„ê°€ ëŠ˜ì–´ë‚˜ë„ë¡ ì„¤ì •ì„ í•´ì£¼ë ¤ê³  í•©ë‹ˆë‹¤:\n\n\n::: {.cell fig.showtext='true'}\n\n```{.r .cell-code}\n# Color-blind safe colors\ncolors <-  thematic::okabe_ito(3)\n# Possible levels of transparency (one for each class)\nalpha_max <- 1\nalpha_min <- 0.7\nalpha_vals <- c(\n  seq(alpha_max, alpha_min, length.out = 4), \n  seq(alpha_min, alpha_max, length.out = 4)[-1]\n)\nalpha_vals\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1.0 0.9 0.8 0.7 0.8 0.9 1.0\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\n# Tweak previous plot\nshades_plt <- shades_plt +\n  scale_fill_manual(values = colors) +\n  scale_alpha_manual(values = alpha_vals)\nshades_plt\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/mpg3-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nì•„ê¹Œë³´ë‹¤ëŠ” ì¢€ ë‚«ìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì¢€ ë” ê°œì„ ì„ í•´ë³´ìêµ¬ìš”. ìš°ì¸¡ ë²”ë¡€ë¥¼ í•˜ë‚˜ë¡œ ì¢€ í†µí•©í•´ì„œ ì„¤ì •í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ì€ë°ìš”. 7ê°œë¡œ êµ¬ë¶„ë˜ì–´ ìˆëŠ” íˆ¬ëª…ë„ì— ì»¬ëŸ¬ë¥¼ ì…í˜€ì¤˜ì„œ ë§ì´ì£ . ê½¤ë‚˜ ì–´ë ¤ìš´ ì‘ì—…ì¼ ê²ƒ ê°™ì§€ë§Œ, `ggplot2`ì—ì„œëŠ” ì•„ì£¼ ì†ì‰¬ìš´ ì‘ì—…ì…ë‹ˆë‹¤. `guides()` í•¨ìˆ˜ë¥¼ í†µí•´ ê°€ëŠ¥í•©ë‹ˆë‹¤. `fill`ì— ê´€í•œ ë²”ë¡€(`class_group`)ëŠ” ì‚­ì œë¥¼ í•œ ë’¤ì—, `guide_legend()`ë¥¼ í†µí•´ `alpha`ì— ê´€í•œ ë²”ë¡€ì— `fill`ì˜ ìƒ‰ìƒì„ ê°€ì ¸ì™€ ìš°ë¦¬ê°€ ì‚¬ì „ì— ì„¤ì •í•œ ê°ê° 3ê°œ ê·¸ë£¹(`class_group`)ì˜ ì»¬ëŸ¬ë¥¼ ë®ì–´ì”Œì›Œ(override) ì¤„ê²ë‹ˆë‹¤. ë§ì´ ì¡°ê¸ˆ ë³µì¡í•´ë³´ì´ì§€ë§Œ, ì½”ë“œë¥¼ ë³´ë©´ ë” ì‰½ê²Œ ì´í•´í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nshades_plt <- shades_plt +\n  guides(\n    fill = guide_none(),\n    alpha = guide_legend(\n      override.aes = list(fill = colors[c(1, 1, 1, 2, 3, 3, 3)]\n      )\n    )\n  ) \nshades_plt\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/mpg4-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n## ìŒì˜ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•´\n\nì¶©ë¶„íˆ ê´œì°®ì€ ì‹œê°í™”ë¥¼ í–ˆì§€ë§Œ, ì•„ì‰¬ìš´ ë¶€ë¶„ì´ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. ì¸ì ‘í•œ ì»¬ëŸ¬ ë¸”ë¡ë“¤ì—ì„œëŠ” ìë™ì°¨ ì¢…ë¥˜ êµ¬ë¶„ì´ ìª¼\\~ê¸ˆ ë¶ˆí¸í•´ ë³´ì…ë‹ˆë‹¤. ì´ ë¬¸ì œ ë˜í•œ ì†ì‰½ê²Œ í•´ê²°í•´ì¤„ ìˆ˜ ìˆì–´ìš”. ë¸”ë¡ë§ˆë‹¤ ì„  í•˜ë‚˜ì”©ë§Œ ê·¸ì–´ì£¼ë©´ ë§ì´ì£ . ì•ì„  ì‹œê°í™” ì½”ë“œì— `geom_bar()` í•œ ì¤„ì´ë©´ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ë˜í•œ ê·¸ë˜í”„ ë¬¸ë²•ì˜ í˜ì´ì£ .ğŸ˜„\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\ndat |> \n  ggplot(aes(x = year, fill = class_group, alpha = class)) +\n  geom_bar(col = 'white') + # Add lines for distinction\n  scale_fill_manual(values = colors) +\n  scale_alpha_manual(values = alpha_vals) +\n  guides(\n    fill = guide_none(),\n    alpha = guide_legend(override.aes = list(fill = colors[c(1, 1, 1, 2, 3, 3, 3)]))\n  ) +\n  labs(\n    x = 'Year',\n    y = 'Counts',\n    alpha = 'Class',\n    title = 'Group categories together by color, \\nbut keep showing them'\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/mpg5-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n## ì „ë‹¬í•˜ê³  ì‹¶ì€ ë‚´ìš©ë§Œ ê°•ì¡°í•˜ì\n\nì´ì œ ì¡°ê¸ˆ ë‹¤ë¥¸ ì´ì•¼ê¸°ë¥¼ í•´ë³´ë ¤ê³  í•©ë‹ˆë‹¤. ê¼­ ìœ„ì™€ ê°™ì´ ëª¨ë“  ë²”ì£¼ì— ëŒ€í•´ ì»¬ëŸ¬ë¥¼ ì¤„ í•„ìš”ëŠ” ì—†ëŠ” ìƒí™©ë„ ìˆì§€ ì•Šì„ê¹Œìš”? ì˜ˆë¥¼ ë“¤ìë©´, ìš°ë¦¬ê°€ ì‹œê°í™”ë¥¼ í†µí•´ ê¼­ ê°•ì¡°í•´ì„œ ì „ë‹¬í•˜ê³  ì‹¶ì€ ë‚´ìš©ì´ ìˆì„ ë•Œì²˜ëŸ¼ìš”. ì´ë²ˆì— ì‚¬ìš©í•  ì˜ˆì‹œ ë°ì´í„°ëŠ” í¥ë¯¸ë¡œìš´ ë‹¤ì–‘í•œ ë°ì´í„°ì…‹ì„ ì œê³µí•´ì£¼ëŠ” [Our World in Data](https://ourworldindata.org/time-with-others-lifetime)ì—ì„œ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ë¯¸êµ­ì¸ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ ì„¤ë¬¸ì¡°ì‚¬ë¥¼ ìˆ˜í–‰í•œ ìë£Œì¸ë°ìš”. ë³¸ ìë£Œë¥¼ í†µí•´ ìš°ë¦¬ê°€ ì•Œì•„ë³´ê³ ì í•˜ëŠ” ë°”ëŠ” \"ìš°ë¦¬ëŠ” ê³¼ì—° ì¼ìƒë™ì•ˆ ëˆ„êµ¬ì™€ ì‹œê°„ì„ ë§ì´ ë³´ë‚´ëŠ”ê°€?\"ì…ë‹ˆë‹¤. ì—¬ëŸ¬ ë‚˜ì´ëŒ€ì˜ ë¯¸êµ­ì¸ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ í•˜ë£¨ì— í‰ê· ì ìœ¼ë¡œ ëˆ„êµ¬ì™€ ì–¼ë§ˆë‚˜ ì‹œê°„ì„ ë³´ë‚´ëŠ”ì§€ì— ëŒ€í•´ ì¡°ì‚¬í•œ ìë£Œë¼ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤. ìœ„ ë§í¬ì˜ ì°¨íŠ¸ì— ì•„ë˜ ìš°ì¸¡ íƒ­ì„ ë³´ì‹œë©´ Downloadë¥¼ ëˆŒëŸ¬ì„œ ë°ì´í„°ë¥¼ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤:\n\nì´ ìë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê·¸ë¦¼ì„ ê·¸ë ¤ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³¼ì—° ë‚˜ì´ì— ë”°ë¼ ìš°ë¦¬ê°€ ì‹œê°„ì„ í•¨ê»˜ ë³´ë‚´ëŠ” ëŒ€ìƒì€ ì–´ë–¤ ì‹ì˜ íŒ¨í„´ì„ ë³´ì´ë©° ë³€í™”í• ê¹Œìš”? ì¼ë°˜ì ìœ¼ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‹œê°í™”ë¥¼\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\n# Some data wrangling\ntime_data <- read_csv(\"./time-spent-with-relationships-by-age-us.csv\") |> \n  rename_with(\n    ~c('Entitity', 'Code', 'Age', 'alone', 'friends', 'children', 'parents', \n       'partner', 'coworkers')\n  ) |> \n  pivot_longer(\n    cols = alone:coworkers, \n    names_to = 'person',\n    values_to = 'minutes'\n  ) |> \n  janitor::clean_names() |> \n  filter(age <= 80)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nRows: 67 Columns: 9\nâ”€â”€ Column specification â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nDelimiter: \",\"\nchr (2): Entity, Code\ndbl (7): Year, Time spent alone, by age of respondent (United States), Time ...\n\nâ„¹ Use `spec()` to retrieve the full column specification for this data.\nâ„¹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n:::\n\n```{.r .cell-code}\n# Color-blind safe colors\ncolors <- thematic::okabe_ito(7)[-6]\n\n# Line plot\np <- time_data |> \n  ggplot(aes(x = age, y = minutes, col = person)) +\n  geom_line(size = 1.5) +\n  scale_color_manual(values = colors) +\n  coord_cartesian(xlim = c(15, 81), expand = F) +\n  scale_y_continuous(minor_breaks = NULL) +\n  labs(x = 'Age (in years)', y = 'Minutes', col = 'Time spent')\np\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend1-1.png){fig-align='center' width=672}\n:::\n:::\n\n\në³´í†µ ì´ë ‡ê²Œë“¤ ì‹œê°í™”í•˜ê³¤ í•˜ì£ . ì´ëŸ° ì¢…ë¥˜ì˜ ê·¸ë¦¼ì€ ìŠ¤íŒŒê²Œí‹° í”Œë¡¯(spaghetti plot)ì´ë¼ê³  í‘œí˜„í•˜ê¸°ë„ í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ë˜ ìˆ˜ë§ì€ ì»¬ëŸ¬ì— ì§ë©´í–ˆìŠµë‹ˆë‹¤. ì•„ìš¸ëŸ¬, ì´ ê·¸ë¦¼ í•œ ì¥ë§Œ ë†“ê³  ë´¤ì„ë•ŒëŠ” ë¬´ìŠ¨ ë§ì„ ì „ë‹¬í•˜ê³ ì í•˜ëŠ”ì§€ íŒŒì•…í•˜ê¸°ê°€ ì°¸ í˜ë“­ë‹ˆë‹¤. ì œ ëˆˆì—” ìš°ì„  2ê°€ì§€ ì¸ì‚¬ì´íŠ¸ê°€ ë³´ì…ë‹ˆë‹¤:\n\n1.  ìš°ë¦¬ëŠ” ì¼ìƒë™ì•ˆ í˜¼ìì„œ ê°€ì¥ ë§ì€ ì‹œê°„ì„ ë³´ë‚´ê²Œ ëœë‹¤.\n2.  40ëŒ€ ì¦ˆìŒí•´ì„œ ì•„ì´ì™€ ë³´ë‚´ëŠ” ì‹œê°„ì€ ì¤„ì–´ë“¤ë©´ì„œ, í˜¼ì ë³´ë‚´ëŠ” ì‹œê°„ì´ ë§ì•„ì§„ë‹¤.\n\nì´ì™€ ê°™ì´ ë§Œì•½ ìš°ë¦¬ê°€ ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ì¸ì‚¬ì´íŠ¸ê°€ í™•ì‹¤í•œ ìƒíƒœë¼ë©´, ì¤‘ìš”í•œ ë¶€ë¶„ë§Œ ê°•ì¡°í•¨ìœ¼ë¡œì¨ ì´ ì§€ì €ë¶„í•œ ìŠ¤íŒŒê²Œí‹° í”Œë¡¯ì„ ì „ë‹¬ë ¥ ìˆëŠ” ê¹”ë”í•œ ìŠ¤íŒŒê²Œí‹° í”Œë¡¯ìœ¼ë¡œ ë§Œë“¤ì–´ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `ggplothighlight` íŒ¨í‚¤ì§€ê°€ ê·¸ í•´ê²°ì±…ì´ ë˜ì–´ì¤ë‹ˆë‹¤. íŒ¨í‚¤ì§€ ì•ˆì˜ `ggplothighlight()` í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ë ˆì´ì–´ë¥¼ í•˜ë‚˜ë” ì–¹ì–´ì„œ, í•„í„°ë§ì„ í•´ì¤„ ìˆ˜ ìˆì–´ìš”. ì•„ì£¼ í¸ë¦¬í•œ íŒ¨í‚¤ì§€ì£ . íŠ¹ì • ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•ŠëŠ” ë°ì´í„° í¬ì¸íŠ¸ëŠ” ëª¨ì¡°ë¦¬ íšŒìƒ‰ìœ¼ë¡œ í‘œí˜„ì´ ë©ë‹ˆë‹¤. ë¨¼ì € ì²« ë²ˆì§¸ ì¸ì‚¬ì´íŠ¸ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•´ë´…ì‹œë‹¤. ì½”ë“œ 1ì¤„ ì •ë„ë§Œ ì¶”ê°€í•´ì£¼ë©´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nlibrary(gghighlight)\nalone_plt <- p + \n  gghighlight(person == 'alone', use_direct_label = F) +\n  labs(title = 'Emphasize just one or a few categories')\nalone_plt\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend2-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nì´ ê·¸ë¦¼ì— í…ìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•˜ì—¬ ìš°ë¦¬ê°€ í•˜ê³ ì‹¶ì€ ì´ì•¼ê¸°ë¥¼ ì¢€ ë” ê°•ì¡°í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nalone_plt +\n  annotate(\n    'text',\n    x = 15,\n    y = 455,\n    label = 'We spend a lot of time alone...',\n    hjust = 0,\n    vjust = 0,\n    family = 'firasans',\n    size = 7\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend3-1.png){fig-align='center' width=672}\n:::\n:::\n\n\ní•˜ê³  ì‹¶ì€ ì´ì•¼ê¸°ê°€ í•˜ë‚˜ê°€ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°œë¼ë©´ ì–´ë–¤ ë°©ë²•ì´ ìˆì„ê¹Œìš”? ì „í˜€ ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.ğŸ˜€ `gghighlight()`ë¥¼ ì‚¬ìš©í•´ ê·¸ì € ì—¬ëŸ¬ ì¡°ê±´ ë„£ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nage_40_plt <- p + \n  gghighlight(\n    person %in% c('alone', 'children'), \n    age >= 38, \n    use_direct_label = F\n  ) +\n  geom_segment(x = 38, xend = 38, y = -Inf, yend = 300, linetype = 2, col = 'grey20') +\n  labs(title = 'Emphasize just one or a few categories') \n\nage_40_plt +\n  annotate(\n    'text',\n    x = 15,\n    y = 403,\n    label = 'Around the age of 40, we spend \\nless time with children and \\nmore time alone.',\n    hjust = 0,\n    vjust = 0,\n    family = 'firasans',\n    lineheight = 0.85,\n    size = 5.5\n  )\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend4-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n## ë¼ë²¨ë§ í™œìš©í•˜ê¸°\n\nì•ì„œ ë³¸ ëª¨ë“  ê·¸ë¦¼ë“¤ì—ì„œëŠ” ê·¸ë¦¼ì˜ ì´í•´ë¥¼ ë•ê¸°ìœ„í•œ ë²”ë¡€(legend)ê°€ ìš°ì¸¡ì— ìë¦¬í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤. ë²”ë¡€ëŠ” ê·¸ë¦¼ì—ì„œ ê½¤ë‚˜ í° ê³µê°„ì„ ì°¨ì§€í•©ë‹ˆë‹¤. ì•„ìš¸ëŸ¬, ë²”ë¡€ëŠ” ê·¸ë¦¼ì— ì§‘ì¤‘ë„ë¥¼ ë–¨ì–´ëœ¨ë¦´ ìˆ˜ ìˆì£ . ê·¸ë¦¼ì˜ ì´í•´ë¥¼ ìœ„í•´ì„œëŠ” í•„ì—°ì ìœ¼ë¡œ ë²”ë¡€ì™€ ê·¸ë¦¼ì„ ë²ˆê°ˆì•„ê°€ë©° ë´ì•¼í•˜ë‹ˆê¹Œìš”. ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ë°©ë²•ì€ ì—†ì„ê¹Œìš”? ë²”ë¡€ë¥¼ ì—†ì• ê³  ê·¸ë¦¼ì— ë¼ë²¨ë§ì„ í†µí•´ ìš°ë¦¬ê°€ í•˜ê³ ì í•˜ëŠ” ì´ì•¼ê¸°ë¥¼ ì „ë‹¬í•˜ë©´ ì–´ë–¨ê¹Œìš”? ì‹±ê¸€ ë ˆì´ë¸”ì— ëŒ€í•´ì„œëŠ” `annotate()`, ë‹¤ì¤‘ ë ˆì´ë¸”ì— ëŒ€í•´ì„œëŠ” `geom_text()`ë¥¼ ì´ìš©í•´ ë¼ë²¨ë§ì„ í•˜ë©´ ë˜ëŠ”ë°ìš”. ìš°ì„  `annotate()`ë¥¼ í™œìš©í•´ ìŠ¤íŒŒê²Œí‹° í”Œë¡¯ ì˜ˆì œë¥¼ ê°œì„ ì‹œì¼œ ë³´ê² ìŠµë‹ˆë‹¤:\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nalone_plt +\n  annotate(\n    'text',\n    x = 15,\n    y = 455,\n    label = 'We spend a lot of time alone...',\n    hjust = 0,\n    vjust = 0,\n    family = 'firasans',\n    size = 7\n  ) +\n  annotate(\n    'text', \n    x = 70, \n    y = 420, \n    label = 'alone',\n    hjust = 0,\n    vjust = 0,\n    size = 7,\n    family = 'firasans',\n    color = colors[1]\n  ) +\n  labs(title = 'Label directly') +\n  theme(legend.position = 'none')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend_label1-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ê³µê°„ë„ ì„¸ì´ë¸Œí•˜ê³ , ê·¸ë¦¼ì— ì§‘ì¤‘ë„ë„ í›¨ì”¬ ë†’í˜€ì¤„ ìˆ˜ ìˆì£ . ë²”ë¡€ì™€ í”Œë¡¯ì„ ëˆˆìœ¼ë¡œ ì™”ë‹¤ê°”ë‹¤ í•  í•„ìš”ë„ ì—†ê³ ìš”. ì—¬ê¸°ì„œ ì¡°ê¸ˆ ë” ê°œì„ ì„ í•´ë³¼ê¹Œìš”? í˜„ì¬ ìœ„ ê·¸ë¦¼ì—ëŠ” aloneì´ë¼ëŠ” ë‹¨ì–´ê°€ ì¤‘ë³µìœ¼ë¡œ ë“¤ì–´ê°€ìˆì£ . ê°•ì¡°í•œ ì„  ì•„ë˜ aloneì„ ì—†ì• ê³  ì„ ê³¼ ë™ì¼í•œ ìƒ‰ìƒì„ ì¢Œì¸¡ ë¬¸ì¥ì˜ aloneì— ë„£ì–´ì£¼ëŠ” ê²ƒì€ ì–´ë–¨ê¹Œìš”? ë” ë§¤ë ¥ì ì¸ ì‹œê°í™”ê°€ ë  ê²ƒë§Œ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì§€ ì•Šë‚˜ìš”?\n\nì´ë¥¼ ìœ„í•´ì„œëŠ” `ggtext` íŒ¨í‚¤ì§€ë¥¼ í™œìš©í•´ HTML ë¬¸ë²•ì„ ì´ìš©í•´ì•¼í•©ë‹ˆë‹¤. `annotation()`ì˜ `text` geomì„ `richtext` geomìœ¼ë¡œ ë°”ê¾¸ê³ , ìš°ë¦¬ê°€ ì»¬ëŸ¬ë¥¼ ë°˜ì˜í•˜ê³ ì í•˜ëŠ” í…ìŠ¤íŠ¸ì— ëŒ€í•´ì„œëŠ” HTML ì½”ë“œë¥¼ í¬í•¨í•˜ëŠ” ë¬¸ìì—´ì„ ë§Œë“¤ì–´ ì£¼ëŠ” ê³¼ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ë§ì´ ì¢€ ë³µì¡í•´ë³´ì´ì§€ë§Œ, ì½”ë“œëŠ” ê½¤ ê°„ë‹¨í•©ë‹ˆë‹¤:\n\n\n::: {.cell fig.showtext='true'}\n\n```{.r .cell-code}\nlibrary(ggtext)\ncolor_alone <- glue::glue(\n  \"We spend a lot of time <span style = 'color:{colors[1]};'>alone</span>...\"\n)\ncolor_alone\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nWe spend a lot of time <span style = 'color:#E69F00;'>alone</span>...\n```\n:::\n:::\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nalone_plt +\n  labs(title = 'Label directly') +\n  annotate(\n    'richtext',\n    x = 15,\n    y = 400,\n    label = color_alone,\n    hjust = 0,\n    vjust = 0,\n    family = 'firasans',\n    size = 6,\n    label.color = NA\n  ) +\n  theme(legend.position = 'none')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend_label2-1.png){fig-align='center' width=672}\n:::\n:::\n\n\në©‹ì§€ì§€ ì•ŠìŠµë‹ˆê¹Œ? HTML ë¬¸ë²•ì— ìµìˆ™í•˜ì§€ ì•Šì€ ë¶„ë“¤ì€ ì»¬ëŸ¬ë§ì„ ë„£ì–´ì£¼ëŠ” í˜•íƒœë¥¼ ê¸°ì–µí•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ì´ëŸ° ì‹ìœ¼ë¡œ ì§ì ‘ì ìœ¼ë¡œ ë¼ë²¨ë§ í•˜ëŠ” ë°©ì‹ì€ ìŠ¤íŒŒê²Œí‹° í”Œë¡¯ ì˜ˆì œì˜ ë‘ ë²ˆì§¸ ì¸ì‚¬ì´íŠ¸ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê·¸ë¦¼ì— ëŒ€í•´ì„œë„ ì†ì‰½ê²Œ ì ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nage_40_text <- glue::glue(\n  \"Around the age of 40, we spent <br> less time with \n  <span style = 'color:{colors[2]};'>children</span> \n  and <br> more time <span style = 'color:{colors[1]};'>alone</span>.\"\n)\n\nage_40_plt +\n  labs(title = 'Label directly') +\n  annotate(\n    'richtext',\n    x = 15,\n    y = 350,\n    label = age_40_text,\n    hjust = 0,\n    vjust = 0,\n    family = 'firasans',\n    lineheight = 1.25,\n    size = 5,\n    label.color = NA\n  ) +\n  theme(legend.position = 'none')\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend_label3-1.png){fig-align='center' width=672}\n:::\n:::\n\n\nì´ëŸ° ì™„ì„±ë„ ìˆëŠ” ì‹œê°í™”ëŠ” ì²­ì¤‘ ë˜ëŠ” ëŒ€ì¤‘ë“¤ì—ê²Œ ìš°ë¦¬ê°€ ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ì´ì•¼ê¸°ë¥¼ ì§ê´€ì ìœ¼ë¡œ ì „ë‹¬í•´ì¤ë‹ˆë‹¤. ë²”ë¡€ì™€ í”Œë¡¯ì„ ëˆˆìœ¼ë¡œ ì™”ë‹¤ê°”ë‹¤ í•˜ëŠ” í”¼ë¡œë¥¼ ëœì–´ì£¼ëŠ” ê²ƒì€ ë¤ì´ê³ ìš”.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, ìš°ë¦¬ê°€ ì´ˆê¸°ì— í–ˆë˜ ì˜ˆì œì¸ ë§‰ëŒ€ê·¸ë˜í”„(bar chart) ì˜ˆì œì—ë„ ì´ë¥¼ ì ìš©í•´ë´…ì‹œë‹¤. í•´ë‹¹ ì˜ˆì œì˜ ê²½ìš° ë‹¤ì¤‘ ë ˆì´ë¸”ì— í•´ë‹¹í•˜ë¯€ë¡œ `annotate()`ì´ ì•„ë‹Œ `geom_text()`ê°€ í•„ìš”ë¡œ ë©ë‹ˆë‹¤. ê·¸ëŸ°ë°, ì–´ë–¤ ì´ìœ ì—ì„œì¸ì§€.. ìë™ì°¨ ì¢…ë¥˜ì˜ ê° ë ˆì´ë¸” ìœ„ì¹˜ê°€ ì •ë ¬ì´ ì•ˆë˜ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ë¶ˆê°€í”¼í•˜ê²Œ ì—°ë„ë³„, ìë™ì°¨ ì¢…ë¥˜ë³„ ë§‰ëŒ€ê·¸ë˜í”„ì˜ ë†’ì´ë¥¼ ëˆ„ì ë¹ˆë„(`csum`)ë¡œ ê³„ì‚°í•˜ê³ , ë ˆì´ë¸”ì´ ë“¤ì–´ê°ˆ ìœ„ì¹˜(`n`)ë¥¼ ì ë‹¹í•˜ê²Œ ì¡ì•„ì£¼ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í–ˆìŠµë‹ˆë‹¤.ğŸ¤¯ ì½”ë“œê°€ ì¡°ê¸ˆ ë³µì¡í•´ ë³´ì´ê¸´ í•˜ë‚˜, ì¶œë ¥ëœ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì‹œë©´ ì–´ë–¤ ì‘ì—…ì„ ì§„í–‰í–ˆëŠ”ì§€ ì‰½ê²Œ ì´í•´í•˜ì‹¤ ìˆ˜ ìˆì„ê²ë‹ˆë‹¤.\n\n\n::: {.cell fig.showtext='true'}\n\n```{.r .cell-code}\nmanual_counts <- mpg |> \n  count(year, class) |> \n  mutate(\n    year = factor(year),\n    class_group = case_when(\n      class %in% c('2seater', 'compact', 'midsize') ~ \"grp1\",\n      class == 'minivan' ~ \"grp2\",\n      T ~ \"grp3\"\n    )\n  ) \nmanual_counts\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 14 Ã— 4\n   year  class          n class_group\n   <fct> <chr>      <int> <chr>      \n 1 1999  2seater        2 grp1       \n 2 1999  compact       25 grp1       \n 3 1999  midsize       20 grp1       \n 4 1999  minivan        6 grp2       \n 5 1999  pickup        16 grp3       \n 6 1999  subcompact    19 grp3       \n 7 1999  suv           29 grp3       \n 8 2008  2seater        3 grp1       \n 9 2008  compact       22 grp1       \n10 2008  midsize       21 grp1       \n11 2008  minivan        5 grp2       \n12 2008  pickup        17 grp3       \n13 2008  subcompact    16 grp3       \n14 2008  suv           33 grp3       \n```\n:::\n\n```{.r .cell-code}\nlabels <- manual_counts |> \n  mutate(class = factor(class)) |>  \n  group_by(year) |> \n  arrange(year, desc(class)) |> \n  mutate(\n    csum = cumsum(n), \n    n = (lag(csum, default = 0) + csum) / 2\n  )\nlabels\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 14 Ã— 5\n# Groups:   year [2]\n   year  class          n class_group  csum\n   <fct> <fct>      <dbl> <chr>       <int>\n 1 1999  suv         14.5 grp3           29\n 2 1999  subcompact  38.5 grp3           48\n 3 1999  pickup      56   grp3           64\n 4 1999  minivan     67   grp2           70\n 5 1999  midsize     80   grp1           90\n 6 1999  compact    102.  grp1          115\n 7 1999  2seater    116   grp1          117\n 8 2008  suv         16.5 grp3           33\n 9 2008  subcompact  41   grp3           49\n10 2008  pickup      57.5 grp3           66\n11 2008  minivan     68.5 grp2           71\n12 2008  midsize     81.5 grp1           92\n13 2008  compact    103   grp1          114\n14 2008  2seater    116.  grp1          117\n```\n:::\n:::\n\n\në ˆì´ë¸”ì´ ë“¤ì–´ê°ˆ ìë¦¬ë¥¼ ê³„ì‚°í•˜ëŠ” í‚¤ ì•„ì´ë””ì–´ëŠ” `lag()`ë¥¼ í†µí•´ì„œ ê³„ì‚°í•œ ëˆ„ì ë¹ˆë„ë¥¼ 0ê°’ì„ ì‹œì‘ìœ¼ë¡œí•´ì„œ í•œì¹¸ì”© ë‹¹ê²¨ì£¼ê³ , ê³„ì‚°í•´ë‘” ëˆ„ì  ë¹ˆë„(`csum`)ë¥¼ ë”í•˜ì—¬ 2ë¡œ ë‚˜ëˆ ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ ë§‰ëŒ€ê·¸ë˜í”„ë¥¼ êµ¬ì„±í•˜ëŠ” ê° ì¹¸ì˜ ì¤‘ê°„ ë†’ì´ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ê²ƒì´ì£ .\n\nì•„ìš¸ëŸ¬, ìš°ë¦¬ê°€ ë³¸ ì‹œê°í™”ì—ì„œ í•œ ê°€ì§€ ë” ê·¹ë³µí•´ì•¼í•  ë‚œê´€ì€ ë°”ë¡œ ìë™ì°¨ì˜ ì¢…ë¥˜ ì¤‘ `2seater`ì˜ ë¹ˆë„ê°€ ë§¤ìš° ì‘ì•„ì„œ ë ˆì´ë¸”ì´ ë“¤ì–´ê°ˆ ìë¦¬ê°€ ì—†ëŠ” ì ì´ ì—ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ, `2seater`ì˜ ê²½ìš° ë ˆì´ë¸”ì„ ë§‰ëŒ€ì˜ ë§¨ ìœ„ì— í‘œì‹œë˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ëª¨ë“  ë‚œê´€ë“¤ì„ ê·¹ë³µí•˜ê³  ì™„ì„±í•œ ê·¸ë¦¼ì„ ê³µê°œí•©ë‹ˆë‹¤.\n\n\n::: {.cell layout-align=\"center\" fig.showtext='true'}\n\n```{.r .cell-code}\nmanual_counts |> \n  ggplot(aes(x = year, y = n, fill = class_group)) +\n  geom_col(aes(alpha = class), col = 'white') +\n  scale_fill_manual(values = colors) +\n  scale_alpha_manual(values = alpha_vals) +\n  labs(\n    x = 'Year',\n    y = 'Counts',\n    alpha = 'Class',\n    title = 'Label directly'\n  ) +\n  # Add all but one label\n  geom_text(\n    data = labels |> filter(class != '2seater'),\n    aes(label = class), \n    col = 'white',\n    family = 'firasans',\n    size = 5,\n    fontface = 'bold'\n  ) +\n  # Add 2seater label\n  geom_text(\n    data = labels |> filter(class == '2seater'),\n    aes(y = n + 3, label = class), \n    col = 'black',\n    family = 'firasans',\n    size = 5,\n    fontface = 'bold'\n  ) +\n  theme(legend.position = 'none') \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/spend_label4-1.png){fig-align='center' width=672}\n:::\n:::\n\n\n## ë§ºìŒë§\n\në¶„ì„ì„ ì‹œì‘í•˜ë©° í˜¼ì ê°€ë³ê²Œ EDAë¥¼ í•˜ëŠ” ë‹¨ê³„ì—ì„œ ë³¸ ì˜ˆì œì™€ ê°™ì´ ì‹œê°í™”ë¥¼ ê°œì„ í•´ë‚˜ê°€ëŠ” ì‘ì—…ì€ í•„ìš”ë¡œ ë˜ì§€ ì•Šì„ê²ë‹ˆë‹¤. ì˜¤íˆë ¤ ì‹œê°„ ë‚­ë¹„ì¼ìˆ˜ë„ ìˆêµ¬ìš”. ê·¸ëŸ¬ë‚˜, ë‚´ê°€ ì–»ì€ ì¸ì‚¬ì´íŠ¸ë¥¼ ì „ë‹¬í•˜ëŠ” ìë¦¬ ë˜ëŠ” ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëˆ„êµ°ê°€ë¥¼ ì„¤ë“í•´ì•¼í•˜ëŠ” ìë¦¬ì—ì„œëŠ” ì´ ê¸€ì—ì„œ ì œê³µí•˜ëŠ” ëª‡ ê°€ì§€ ë°©ë²•ì´ ê½¤ë‚˜ ë„ì›€ì´ ë  ê²ƒì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. ë¬¼ë¡ , ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ë‚´ìš©ì´ í•œ ëˆˆì— ë“¤ì–´ë„ë¡ ì‹œê°í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ì€ ì˜ì™¸ë¡œ ì‰¬ìš¸ ë•Œë„ ìˆì§€ë§Œ, ê½¤ë‚˜ ê¹Œë‹¤ë¡œìš´ ê³¼ì •ì„ ê±°ì³ì•¼í•˜ëŠ” ìƒí™©ë„ ì¡´ì¬í•©ë‹ˆë‹¤. ì‹¤ë¬´ì—ì„œëŠ” ì´ì™€ëŠ” ë˜ë‹¤ë¥¸ ì˜ˆìƒì¹˜ ëª»í•œ ê¹Œë‹¤ë¡œìš´ ë¬¸ì œë“¤ì„ ê²ªëŠ” ìƒí™©ë“¤ì´ ìˆì„ ìˆ˜ë„ ìˆêµ¬ìš”. ë‹¤ë§Œ, ë³¸ ê¸€ì—ì„œ ê·¸ë¦¼ì˜ í€„ë¦¬í‹°ë¥¼ ë‹¨ê³„ë‹¨ê³„ ê°œì„ í•´ë‚˜ê°„ ë°”ì™€ ê°™ì´ ì „ë‹¬í•˜ê³ ì í•˜ëŠ” ë‚´ìš©ì„ ëª…í™•íˆí•˜ê³  ì¶©ë¶„í•œ ì‹œê°„ì„ ìˆ™ê³ í•´ ê·¸ë¦¼ì„ ê°œì„ í•´ ë‚˜ê°„ë‹¤ë©´, ë­ë“  í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ë´…ë‹ˆë‹¤. í•˜ê³ ì í•˜ëŠ” ì‹œê°í™”ë¥¼ êµ¬í˜„í•˜ì§€ ëª»í•´ë‚¸ë‹¤ê³  í•˜ë”ë¼ë„ ê·¸ ê³¼ì • ì†ì—ì„œ ë°°ìš°ëŠ” ê²ƒì€ ë¶„ëª…íˆ ì¡´ì¬í•  ê²ƒì…ë‹ˆë‹¤. ì²˜ìŒë¶€í„° ì™„ë²½í•˜ê²Œ ì•„ë¦„ë‹¤ìš´ ì‹œê°í™”ë¥¼ í•´ë‚¼ ìˆ˜ ìˆëŠ” ì‚¬ëŒì€ ì—†ë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì…¨ìœ¼ë©´ í•©ë‹ˆë‹¤.ğŸ˜\n\nì´ë²ˆ í¬ìŠ¤íŒ…ì„ ì¤€ë¹„í•˜ë©° ì°¸ê³ í–ˆë˜ ê¸€ì€ ì˜¬í•´ ë´¤ë˜ ë°ì´í„° ì‹œê°í™” ê´€ë ¨ ì•„í‹°í´ ì¤‘ ì œê²Œ ê°€ì¥ í° ì„íŒ©íŠ¸ë¥¼ ì£¼ëŠ” ê¸€ì´ì—ˆìŠµë‹ˆë‹¤. ëˆ„êµ¬ë‚˜ í•˜ëŠ” í‰ë²”í•œ ì‹œê°í™”ë¥¼ ë¹„ë²”í•˜ê²Œ ë§Œë“¤ì–´ì£¼ëŠ” ê¸€ì´ë¼ê³  í‘œí˜„í•˜ë©´ ì ì ˆí• ê¹Œìš”? ë§ì€ ì‚¬ëŒë“¤ì´ ì•Œì•˜ìœ¼ë©´ í•˜ëŠ” ë‚´ìš©ì´ë¼, 8ì›” ì„œìš¸ R ë¯¸íŠ¸ì—…ì—ì„œ ë³¸ ë‚´ìš©ì„ ì£¼ì œë¡œ [ë°œí‘œ](https://be-favorite.github.io/Presentation_archive/coloring_guide/coloring_guide.html?fbclid=IwAR25qqDhVFzBVsp8u9PaV93pbzxA03wE8paPF0-u7oBVKFMT5gZtPCupono#1)ë¥¼ í•˜ê¸°ë„ í–ˆìŠµë‹ˆë‹¤. ì§€ê¸ˆ ì´ ê¸€ì„ ì½ê³  ê³„ì‹  ì—¬ëŸ¬ë¶„ë“¤ì—ê²Œë„ ì¢‹ì€ ì¸ì‚¬ì´íŠ¸ë¥¼ ì¤„ ìˆ˜ ìˆëŠ” ê¸€ì´ ë˜ì—ˆìœ¼ë©´ í•©ë‹ˆë‹¤.\n\n::: {.callout-tip collapse=\"true\"}\n## ì„¸ì…˜ì •ë³´ë¥¼ ë³´ë ¤ë©´ ëˆ„ë¥´ì„¸ìš”\n\n\n::: {.cell fig.showtext='true'}\n::: {.cell-output .cell-output-stdout}\n```\nâ”€ Session info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n setting  value\n version  R version 4.2.1 (2022-06-23)\n os       macOS Monterey 12.6\n system   aarch64, darwin20\n ui       X11\n language (EN)\n collate  en_US.UTF-8\n ctype    en_US.UTF-8\n tz       Asia/Seoul\n date     2022-09-20\n pandoc   2.18 @ /Applications/RStudio.app/Contents/MacOS/quarto/bin/tools/ (via rmarkdown)\n quarto   1.0.38 @ /usr/local/bin/quarto\n\nâ”€ Packages â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n package     * version date (UTC) lib source\n dplyr       * 1.0.9   2022-04-28 [1] CRAN (R 4.2.0)\n forcats     * 0.5.1   2021-01-27 [1] CRAN (R 4.2.0)\n gghighlight * 0.3.3   2022-06-06 [1] CRAN (R 4.2.0)\n ggplot2     * 3.3.6   2022-05-03 [1] CRAN (R 4.2.0)\n ggtext      * 0.1.1   2020-12-17 [1] CRAN (R 4.2.0)\n purrr       * 0.3.4   2020-04-17 [1] CRAN (R 4.2.0)\n readr       * 2.1.2   2022-01-30 [1] CRAN (R 4.2.0)\n rmarkdown   * 2.14    2022-04-25 [1] CRAN (R 4.2.0)\n sessioninfo * 1.2.2   2021-12-06 [1] CRAN (R 4.2.0)\n showtext    * 0.9-5   2022-02-09 [1] CRAN (R 4.2.0)\n showtextdb  * 3.0     2020-06-04 [1] CRAN (R 4.2.0)\n stringr     * 1.4.0   2019-02-10 [1] CRAN (R 4.2.0)\n sysfonts    * 0.8.8   2022-03-13 [1] CRAN (R 4.2.0)\n tibble      * 3.1.8   2022-07-22 [1] CRAN (R 4.2.0)\n tidyr       * 1.2.0   2022-02-01 [1] CRAN (R 4.2.0)\n tidyverse   * 1.3.2   2022-07-18 [1] CRAN (R 4.2.0)\n\n [1] /Library/Frameworks/R.framework/Versions/4.2-arm64/Resources/library\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n```\n:::\n:::\n\n:::",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}